import { ack as ackX } from "ack-x/js/index-browser";
export function between(input, a, b) {
    if (a == null || b == null)
        return false;
    return (input >= a && input <= b) || (input <= a && input >= b) ? true : false;
}
export function replaceMaxLength(input, max, replacement = '...') {
    if ((input === null || input === void 0 ? void 0 : input.length) > max) {
        return input.slice(0, max) + replacement;
    }
    return input;
}
export function numberToPhone(val) {
    if (val == null || !val) {
        return val;
    }
    val = String(val).replace(/[^0-9]/g, '');
    if (val.length == 0)
        return val;
    return '(' + val.substring(0, 3) + ') ' + val.substring(3, 6) + '-' + val.substring(6, 10);
}
export function toNumber(val) {
    return Number(numbers(val, "."));
}
export function numberSuffix(val, rtnVal = false) {
    var rtn = rtnVal ? val : '';
    val = Number(val);
    if (!val || isNaN(val))
        return '';
    var j = val % 10, k = val % 100;
    if (j == 1 && k != 11) {
        return rtn + "st";
    }
    if (j == 2 && k != 12) {
        return rtn + "nd";
    }
    if (j == 3 && k != 13) {
        return rtn + "rd";
    }
    return rtn + "th";
}
/** if input is array returned otherwise array created with  */
export function array(input, repeat, repeatValue) {
    const isArray = input != null && input.constructor == Array;
    let rtn = isArray ? input : [];
    if (!repeat && !isArray && input != null) {
        rtn.push(input);
    }
    if (repeat && !isNaN(Number(repeat))) {
        const val = typeof (repeatValue) === 'undefined' ? input : repeatValue;
        while (rtn.length < repeat) {
            rtn.push(val);
        }
    }
    return rtn;
}
export function arrayOfObjects(input, repeat, repeatValue) {
    return array(input, repeat, repeatValue).map((v, i) => ({ value: v, index: i }));
}
export function markdownAnchor(input) {
    input = input.toString().replace(/&/gi, 'amp'); //possibly unneeded
    input = input.toString().replace(/ /gi, '-');
    input = input.replace(/[^a-z0-9_-]/gi, '');
    return input.toLowerCase();
}
//use with bypassSecurityTrustResourceUrl for href
export function textDownload(input) {
    if (input == null)
        return input;
    return 'data:text/plain;charset=utf-8,' + encodeURIComponent(input);
}
export function yesno(input) {
    if (input == null)
        return input;
    return input ? 'yes' : 'no';
}
export function yesNo(input) {
    if (input == null)
        return input;
    return input ? 'Yes' : 'No';
}
export function boolean(input) {
    if (input == null)
        return false;
    const num = Number(input);
    if (!isNaN(num)) {
        return Boolean(num) ? true : false;
    }
    if (input.toLowerCase) {
        if (input.toLowerCase() == 'true')
            return true;
        if (input.toLowerCase() == 'false')
            return false;
    }
    return Boolean(input) ? true : false;
}
export function bit(input) {
    return boolean(input) ? 1 : 0;
}
export function numbers(input, safeChars //upto 4 acceptable characters
) {
    let xString = '[^0-9';
    if (safeChars) {
        if (safeChars.length > 4) {
            safeChars = safeChars.substring(0, 4); //do not allow safeChars to create a maliscous regx
        }
        xString += safeChars;
    }
    xString += ']';
    const regX = new RegExp(xString, 'g');
    return input ? String(input).replace(regX, '') : input;
}
export function capitalizeWords(input) {
    var reg = /[^\W_]+[^\s-]* */g;
    return (!!input) ? input.replace(reg, function (txt) { return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase(); }) : '';
}
/** each sentence word is capitalized */
export function capitalize(input) {
    input = pipes.capitalizeOne(input);
    var reg = /[.?!][\s\r\t]+\w/g;
    return (!!input) ? input.replace(reg, pipes.capitalizeAfterSentence) : '';
}
export function capitalizeAfterSentence(input) {
    var reg = /[\s\r\t]\w/g;
    return (!!input) ? input.replace(reg, function (txt) { return txt.charAt(0) + txt.charAt(1).toUpperCase() + txt.substr(2).toLowerCase(); }) : '';
}
export function capitalizeOne(input) {
    var reg = /[^\W_]+[^\s-]*/;
    return (!!input) ? input.replace(reg, function (txt) { return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase(); }) : '';
}
function a(name) {
    const av = new ackX();
    return invokeRotator(av[name]);
}
import { invokeRotator } from "./invokeRotator";
export const aDate = a('date');
export const aTime = a('time');
export const aMath = invokeRotator(Math);
export const aString = invokeRotator(String);
export const ack = invokeRotator(ackX);
// maybe deprecated . Remove in future releases. Just an array ref of all pipes
export const pipes = {
    ack,
    aDate,
    aMath,
    array,
    aString,
    aTime,
    between,
    capitalize,
    capitalizeAfterSentence,
    capitalizeOne,
    capitalizeWords,
    numbers,
    numberSuffix,
    numberToPhone,
    markdownAnchor,
    replaceMaxLength,
    textDownload,
    toNumber,
    yesno,
    yesNo,
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGlwZXMuY2xhc3MuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvcGlwZXMuY2xhc3MudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLEdBQUcsSUFBSSxJQUFJLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQTtBQUVwRCxNQUFNLFVBQVUsT0FBTyxDQUNyQixLQUFhLEVBQUUsQ0FBUyxFQUFFLENBQVM7SUFFbkMsSUFBRyxDQUFDLElBQUUsSUFBSSxJQUFJLENBQUMsSUFBRSxJQUFJO1FBQUMsT0FBTyxLQUFLLENBQUE7SUFDbEMsT0FBTyxDQUFDLEtBQUssSUFBSSxDQUFDLElBQUksS0FBSyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLENBQUMsSUFBSSxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFBO0FBQ2hGLENBQUM7QUFFRCxNQUFNLFVBQVUsZ0JBQWdCLENBQzlCLEtBQVksRUFBRSxHQUFXLEVBQUUsY0FBc0IsS0FBSztJQUV0RCxJQUFHLENBQUEsS0FBSyxhQUFMLEtBQUssdUJBQUwsS0FBSyxDQUFFLE1BQU0sSUFBRyxHQUFHLEVBQUU7UUFDdEIsT0FBTyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsR0FBRyxXQUFXLENBQUE7S0FDekM7SUFFRCxPQUFPLEtBQUssQ0FBQTtBQUNkLENBQUM7QUFFRCxNQUFNLFVBQVUsYUFBYSxDQUMzQixHQUFvQjtJQUVsQixJQUFJLEdBQUcsSUFBSSxJQUFJLElBQUksQ0FBQyxHQUFHLEVBQUM7UUFDdEIsT0FBTyxHQUFHLENBQUE7S0FDWDtJQUVELEdBQUcsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxFQUFFLENBQUMsQ0FBQTtJQUV4QyxJQUFLLEdBQUcsQ0FBQyxNQUFNLElBQUUsQ0FBQztRQUFFLE9BQU8s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YixlQUFlO0lBQ2YsT0FBTztJQUNQLFlBQVk7SUFDWixhQUFhO0lBQ2IsY0FBYztJQUNkLGdCQUFnQjtJQUNoQixZQUFZO0lBQ1osUUFBUTtJQUNSLEtBQUs7SUFDTCxLQUFLO0NBQ04sQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFjayBhcyBhY2tYIH0gZnJvbSBcImFjay14L2pzL2luZGV4LWJyb3dzZXJcIlxuXG5leHBvcnQgZnVuY3Rpb24gYmV0d2VlbihcbiAgaW5wdXQ6IG51bWJlciwgYTogbnVtYmVyLCBiOiBudW1iZXJcbikge1xuICBpZihhPT1udWxsIHx8IGI9PW51bGwpcmV0dXJuIGZhbHNlXG4gIHJldHVybiAoaW5wdXQgPj0gYSAmJiBpbnB1dCA8PSBiKSB8fCAoaW5wdXQgPD0gYSAmJiBpbnB1dCA+PSBiKSA/IHRydWUgOiBmYWxzZVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVwbGFjZU1heExlbmd0aChcbiAgaW5wdXQ6c3RyaW5nLCBtYXg6IG51bWJlciwgcmVwbGFjZW1lbnQ6IHN0cmluZyA9ICcuLi4nXG4pOiBzdHJpbmcge1xuICBpZihpbnB1dD8ubGVuZ3RoID4gbWF4KSB7XG4gICAgcmV0dXJuIGlucHV0LnNsaWNlKDAsIG1heCkgKyByZXBsYWNlbWVudFxuICB9XG5cbiAgcmV0dXJuIGlucHV0XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBudW1iZXJUb1Bob25lKFxuICB2YWw6IG51bWJlciB8IHN0cmluZ1xuKTogc3RyaW5nIHwgdW5rbm93biB7XG4gICAgaWYgKHZhbCA9PSBudWxsIHx8ICF2YWwpe1xuICAgICAgcmV0dXJuIHZhbFxuICAgIH1cblxuICAgIHZhbCA9IFN0cmluZyh2YWwpLnJlcGxhY2UoL1teMC05XS9nLCAnJylcblxuICAgIGlmICggdmFsLmxlbmd0aD09MCApcmV0dXJuIHZhbFxuXG4gICAgcmV0dXJuICcoJyArIHZhbC5zdWJzdHJpbmcoMCwgMykgKyAnKSAnICsgdmFsLnN1YnN0cmluZygzLCA2KSArICctJyArIHZhbC5zdWJzdHJpbmcoNiwgMTApXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0b051bWJlcih2YWw6IHN0cmluZyB8IG51bWJlcil7XG4gICAgcmV0dXJuIE51bWJlciggbnVtYmVycyh2YWwsIFwiLlwiKSApXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBudW1iZXJTdWZmaXgoXG4gIHZhbDogbnVtYmVyIHwgc3RyaW5nLCBydG5WYWw9ZmFsc2Vcbil7XG4gIHZhciBydG4gPSBydG5WYWwgPyB2YWwgOiAnJ1xuICB2YWwgPSBOdW1iZXIodmFsKVxuXG4gIGlmKCF2YWwgfHwgaXNOYU4odmFsKSlyZXR1cm4gJydcblxuICB2YXIgaiA9IHZhbCAlIDEwLFxuICAgICAgayA9IHZhbCAlIDEwMDtcbiAgaWYgKGogPT0gMSAmJiBrICE9IDExKSB7XG4gICAgICByZXR1cm4gcnRuK1wic3RcIjtcbiAgfVxuICBpZiAoaiA9PSAyICYmIGsgIT0gMTIpIHtcbiAgICAgIHJldHVybiBydG4rXCJuZFwiO1xuICB9XG4gIGlmIChqID09IDMgJiYgayAhPSAxMykge1xuICAgICAgcmV0dXJuIHJ0bitcInJkXCI7XG4gIH1cbiAgcmV0dXJuIHJ0bitcInRoXCI7XG59XG5cbi8qKiBpZiBpbnB1dCBpcyBhcnJheSByZXR1cm5lZCBvdGhlcndpc2UgYXJyYXkgY3JlYXRlZCB3aXRoICAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFycmF5KFxuICBpbnB1dDogc3RyaW5nIHwgYW55W10sXG4gIHJlcGVhdD86bnVtYmVyLFxuICByZXBlYXRWYWx1ZT86IHVua25vd24gfCBudW1iZXIgfCBzdHJpbmdcbik6IGFueVtdIHtcbiAgY29uc3QgaXNBcnJheSA9IGlucHV0IT1udWxsICYmIGlucHV0LmNvbnN0cnVjdG9yID09IEFycmF5XG4gIGxldCBydG46IGFueVtdID0gaXNBcnJheSA/IGlucHV0IGFzIGFueVtdIDogW11cblxuICBpZighcmVwZWF0ICYmICFpc0FycmF5ICYmIGlucHV0IT1udWxsKXtcbiAgICBydG4ucHVzaChpbnB1dClcbiAgfVxuXG4gIGlmKCByZXBlYXQgJiYgIWlzTmFOKE51bWJlcihyZXBlYXQpKSApe1xuICAgIGNvbnN0IHZhbCA9IHR5cGVvZihyZXBlYXRWYWx1ZSk9PT0ndW5kZWZpbmVkJyA/IGlucHV0IDogcmVwZWF0VmFsdWVcbiAgICB3aGlsZSggcnRuLmxlbmd0aCA8IHJlcGVhdCApe1xuICAgICAgcnRuLnB1c2goIHZhbCApXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJ0blxufVxuXG5leHBvcnQgZnVuY3Rpb24gYXJyYXlPZk9iamVjdHMoXG4gIGlucHV0OiBzdHJpbmcgfCBhbnlbXSxcbiAgcmVwZWF0PzpudW1iZXIsXG4gIHJlcGVhdFZhbHVlPzogdW5rbm93biB8IHN0cmluZyB8IG51bWJlclxuKTogYW55W10ge1xuICByZXR1cm4gYXJyYXkoaW5wdXQsIHJlcGVhdCwgcmVwZWF0VmFsdWUpLm1hcCgodixpKT0+KHt2YWx1ZTp2LCBpbmRleDppfSkpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYXJrZG93bkFuY2hvcihpbnB1dDpzdHJpbmcpe1xuICBpbnB1dCA9IGlucHV0LnRvU3RyaW5nKCkucmVwbGFjZSgvJi9naSwgJ2FtcCcpLy9wb3NzaWJseSB1bm5lZWRlZFxuICBpbnB1dCA9IGlucHV0LnRvU3RyaW5nKCkucmVwbGFjZSgvIC9naSwnLScpXG4gIGlucHV0ID0gaW5wdXQucmVwbGFjZSgvW15hLXowLTlfLV0vZ2ksJycpXG4gIHJldHVybiBpbnB1dC50b0xvd2VyQ2FzZSgpXG59XG5cbiAgLy91c2Ugd2l0aCBieXBhc3NTZWN1cml0eVRydXN0UmVzb3VyY2VVcmwgZm9yIGhyZWZcbmV4cG9ydCBmdW5jdGlvbiB0ZXh0RG93bmxvYWQoaW5wdXQ6YW55KXtcbiAgaWYoaW5wdXQ9PW51bGwpcmV0dXJuIGlucHV0XG4gIHJldHVybiAnZGF0YTp0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgsJyArIGVuY29kZVVSSUNvbXBvbmVudChpbnB1dClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHllc25vKGlucHV0OmFueSl7XG4gIGlmKGlucHV0PT1udWxsKXJldHVybiBpbnB1dFxuICByZXR1cm4gaW5wdXQgPyAneWVzJyA6ICdubyc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB5ZXNObyhpbnB1dDphbnkpe1xuICBpZihpbnB1dD09bnVsbClyZXR1cm4gaW5wdXRcbiAgcmV0dXJuIGlucHV0ID8gJ1llcycgOiAnTm8nO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYm9vbGVhbihpbnB1dDphbnkpe1xuICBpZihpbnB1dD09bnVsbClyZXR1cm4gZmFsc2VcblxuICBjb25zdCBudW0gPSBOdW1iZXIoaW5wdXQpXG4gIGlmKCFpc05hTihudW0pKXtcbiAgICByZXR1cm4gQm9vbGVhbihudW0pID8gdHJ1ZSA6IGZhbHNlO1xuICB9XG5cbiAgaWYoaW5wdXQudG9Mb3dlckNhc2Upe1xuICAgIGlmKCBpbnB1dC50b0xvd2VyQ2FzZSgpPT0ndHJ1ZScgKXJldHVybiB0cnVlXG4gICAgaWYoIGlucHV0LnRvTG93ZXJDYXNlKCk9PSdmYWxzZScgKXJldHVybiBmYWxzZVxuICB9XG5cbiAgcmV0dXJuIEJvb2xlYW4oaW5wdXQpID8gdHJ1ZSA6IGZhbHNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYml0KGlucHV0OmFueSl7XG4gIHJldHVybiBib29sZWFuKGlucHV0KSA/IDEgOiAwO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbnVtYmVycyhcbiAgaW5wdXQ6YW55LFxuICBzYWZlQ2hhcnM/OnN0cmluZy8vdXB0byA0IGFjY2VwdGFibGUgY2hhcmFjdGVyc1xuKXtcbiAgbGV0IHhTdHJpbmcgPSAnW14wLTknXG5cbiAgaWYoIHNhZmVDaGFycyApe1xuICAgIGlmKCBzYWZlQ2hhcnMubGVuZ3RoPjQgKXtcbiAgICAgIHNhZmVDaGFycyA9IHNhZmVDaGFycy5zdWJzdHJpbmcoMCwgNCkvL2RvIG5vdCBhbGxvdyBzYWZlQ2hhcnMgdG8gY3JlYXRlIGEgbWFsaXNjb3VzIHJlZ3hcbiAgICB9XG5cbiAgICB4U3RyaW5nICs9IHNhZmVDaGFyc1xuICB9XG5cbiAgeFN0cmluZyArPSAnXSdcbiAgY29uc3QgcmVnWCA9IG5ldyBSZWdFeHAoeFN0cmluZywgJ2cnKVxuXG4gIHJldHVybiBpbnB1dCA/IFN0cmluZyhpbnB1dCkucmVwbGFjZShyZWdYLCcnKSA6IGlucHV0XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjYXBpdGFsaXplV29yZHMoaW5wdXQ6YW55KXtcbiAgdmFyIHJlZyA9IC9bXlxcV19dK1teXFxzLV0qICovZ1xuICByZXR1cm4gKCEhaW5wdXQpID8gaW5wdXQucmVwbGFjZShyZWcsIGZ1bmN0aW9uKHR4dDphbnkpe3JldHVybiB0eHQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB0eHQuc3Vic3RyKDEpLnRvTG93ZXJDYXNlKCl9KSA6ICcnXG59XG5cbi8qKiBlYWNoIHNlbnRlbmNlIHdvcmQgaXMgY2FwaXRhbGl6ZWQgKi9cbmV4cG9ydCBmdW5jdGlvbiBjYXBpdGFsaXplKGlucHV0OmFueSl7XG4gIGlucHV0ID0gcGlwZXMuY2FwaXRhbGl6ZU9uZShpbnB1dClcbiAgdmFyIHJlZyA9IC9bLj8hXVtcXHNcXHJcXHRdK1xcdy9nXG4gIHJldHVybiAoISFpbnB1dCkgPyBpbnB1dC5yZXBsYWNlKHJlZywgcGlwZXMuY2FwaXRhbGl6ZUFmdGVyU2VudGVuY2UpIDogJydcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNhcGl0YWxpemVBZnRlclNlbnRlbmNlKGlucHV0OmFueSl7XG4gIHZhciByZWcgPSAvW1xcc1xcclxcdF1cXHcvZ1xuICByZXR1cm4gKCEhaW5wdXQpID8gaW5wdXQucmVwbGFjZShyZWcsIGZ1bmN0aW9uKHR4dDphbnkpe3JldHVybiB0eHQuY2hhckF0KDApICsgdHh0LmNoYXJBdCgxKS50b1VwcGVyQ2FzZSgpICsgdHh0LnN1YnN0cigyKS50b0xvd2VyQ2FzZSgpfSkgOiAnJ1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FwaXRhbGl6ZU9uZShpbnB1dDphbnkpIHtcbiAgdmFyIHJlZyA9IC9bXlxcV19dK1teXFxzLV0qL1xuICByZXR1cm4gKCEhaW5wdXQpID8gaW5wdXQucmVwbGFjZShyZWcsIGZ1bmN0aW9uKHR4dDphbnkpe3JldHVybiB0eHQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB0eHQuc3Vic3RyKDEpLnRvTG93ZXJDYXNlKCl9KSA6ICcnXG59XG5cbmZ1bmN0aW9uIGEobmFtZTpzdHJpbmcpe1xuICBjb25zdCBhdiA9IG5ldyBhY2tYKClcbiAgcmV0dXJuIGludm9rZVJvdGF0b3IoIGF2W25hbWVdIClcbn1cblxuaW1wb3J0IHsgaW52b2tlUm90YXRvciB9IGZyb20gXCIuL2ludm9rZVJvdGF0b3JcIlxuXG5leHBvcnQgY29uc3QgYURhdGUgPSBhKCdkYXRlJylcbmV4cG9ydCBjb25zdCBhVGltZSA9IGEoJ3RpbWUnKVxuZXhwb3J0IGNvbnN0IGFNYXRoID0gaW52b2tlUm90YXRvciggTWF0aCApXG5leHBvcnQgY29uc3QgYVN0cmluZyA9IGludm9rZVJvdGF0b3IoIFN0cmluZyApXG5leHBvcnQgY29uc3QgYWNrID0gaW52b2tlUm90YXRvciggYWNrWCApXG5cbi8vIG1heWJlIGRlcHJlY2F0ZWQgLiBSZW1vdmUgaW4gZnV0dXJlIHJlbGVhc2VzLiBKdXN0IGFuIGFycmF5IHJlZiBvZiBhbGwgcGlwZXNcbmV4cG9ydCBjb25zdCBwaXBlcyA9IHtcbiAgYWNrLFxuICBhRGF0ZSxcbiAgYU1hdGgsXG4gIGFycmF5LFxuICBhU3RyaW5nLFxuICBhVGltZSxcbiAgYmV0d2VlbixcbiAgY2FwaXRhbGl6ZSxcbiAgY2FwaXRhbGl6ZUFmdGVyU2VudGVuY2UsXG4gIGNhcGl0YWxpemVPbmUsXG4gIGNhcGl0YWxpemVXb3JkcyxcbiAgbnVtYmVycyxcbiAgbnVtYmVyU3VmZml4LFxuICBudW1iZXJUb1Bob25lLFxuICBtYXJrZG93bkFuY2hvcixcbiAgcmVwbGFjZU1heExlbmd0aCxcbiAgdGV4dERvd25sb2FkLFxuICB0b051bWJlcixcbiAgeWVzbm8sXG4gIHllc05vLFxufSJdfQ==