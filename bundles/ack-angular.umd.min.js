!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("ack-angular-fx"),require("ack-x/browser"),require("rxjs/internal/BehaviorSubject"),require("@angular/platform-browser"),require("@angular/router"),require("@angular/common/http"),require("localforage")):"function"==typeof define&&define.amd?define("ack-angular",["exports","@angular/core","@angular/common","ack-angular-fx","ack-x/browser","rxjs/internal/BehaviorSubject","@angular/platform-browser","@angular/router","@angular/common/http","localforage"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["ack-angular"]={},e.ng.core,e.ng.common,e.ackAngularFx,e.browser,e.rxjs["internal/BehaviorSubject"],e.ng.platformBrowser,e.ng.router,e.ng.common.http,e.localForage)}(this,(function(e,t,n,r,o,i,a,s,l,p){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function u(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function h(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function d(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}var f=function(){function e(){var e=this;this.change=new t.EventEmitter,this.htmlSize={width:null,height:null},this.onResize=function(){e.htmlSize.width=window.document.documentElement.clientWidth,e.htmlSize.height=window.document.documentElement.clientHeight,e.change.emit()},this.checkWatchers(),this.onResize()}return e.prototype.checkWatchers=function(){this.change.observers.length?window.addEventListener("resize",this.onResize):window.removeEventListener("resize",this.onResize)},e}();f.decorators=[{type:t.Injectable}],f.ctorParameters=function(){return[]},f.propDecorators={change:[{type:t.Output}]};var m=function(){function e(){this.log=[],this.maxLog=80}return e.prototype.add=function(e,t){var n=this.paramAudit(e,t);if(this.log.unshift(n),this.maxLog)for(;this.log.length>this.maxLog;)this.log.pop();return e},e.prototype.paramAudit=function(e,t){switch(e.constructor){case String:case Boolean:case Number:e={message:e}}var n;return(null==t||t)&&console.log(e),e.datetime=e.datetime||("0"+((n=new Date).getMonth()+1)).slice(-2)+"/"+("0"+n.getDate()).slice(-2)+"/"+n.getFullYear()+" "+function(e){var t=e.getHours(),n="AM",r=e.getMinutes(),o=r<10?"0"+r:r;return("0"+(t=t>=12?(n="PM",t-12||12):0==t?12:t)).slice(-2)+":"+("0"+o).slice(-2)+" "+n}(new Date),e},e}();m.decorators=[{type:t.Injectable}];var g=function(){function e(){this.prompts=[]}return e.prototype.remove=function(e){for(var t=this.prompts.length-1;t>=0;--t)if(this.prompts[t]==e)return void this.prompts.splice(t,1)},e.prototype.issuePrompt=function(e){var t=this;return this.prompts.push(e),e.emitter.subscribe((function(){return t.remove(e)})),e.emitter},e.prototype.alert=function(e,n){return void 0===n&&(n={}),n.emitter=new t.EventEmitter,n.type="alert",n.message=e,this.issuePrompt(n)},e.prototype.confirm=function(e,n){return void 0===n&&(n={}),n.emitter=new t.EventEmitter,n.type="confirm",n.message=e,this.issuePrompt(n)},e}();g.decorators=[{type:t.Injectable}];var y=function(){function e(e){this.prompts=e,this.warnedFixElements=!0,this.fixedElms=[],this.modals=[]}return e.prototype.registerModal=function(e){return this.modals.push(e),this},e.prototype.unregisterModal=function(e){for(var t=this.modals.length-1;t>=0;--t)if(this.modals[t]==e){this.modals.splice(t,1);break}return this},e}();y.decorators=[{type:t.Injectable}],y.ctorParameters=function(){return[{type:g}]};var v=function(){function e(){this.log=[],this.maxLog=30}return e.prototype.monitorWindow=function(e){var t=this;(e=e||window).addEventListener("error",(function(e){return t.add(e,!1)}))},e.prototype.reject=function(e){var t=this.add(e);return Promise.reject(t)},e.prototype.rejector=function(){var e=this;return function(t){return e.reject(t)}},e.prototype.add=function(e,t){var n=this.paramAudit(e,t);if(this.log.unshift(n),this.maxLog)for(;this.log.length>this.maxLog;)this.log.pop();return function(e){var t=new Error(function(e){if(e.data&&e.data.error&&e.data.error.message)return e.data.error.message;return t=e,t.message||t.statusText||t.name||"Unexpected Error Occured";var t}(e));return Object.keys(e).forEach((function(n){return t[n]=e[n]})),t}(n)},e.prototype.paramAudit=function(e,t){e.constructor===String&&(e=new Error(e)),(null==t||t)&&console.error(e);var n,r=this.objectifyError(e);return r.datetime=r.datetime||("0"+((n=new Date).getMonth()+1)).slice(-2)+"/"+("0"+n.getDate()).slice(-2)+"/"+n.getFullYear()+" "+function(e){var t=e.getHours(),n="AM",r=e.getMinutes(),o=r<10?"0"+r:r;return("0"+(t=t>=12?(n="PM",t-12||12):0==t?12:t)).slice(-2)+":"+("0"+o).slice(-2)+" "+n}(new Date),e.message||-1!=e.status||(e.message="Cannot connect to server",e.details=e.details||"Connection to internet maybe down. Also possible CORS needs be to enabled at remote server."),r},e.prototype.objectifyError=function(e){var t=Object.getOwnPropertyNames(e);t.push.apply(t,Object.keys(e));var n={};t.forEach((function(t){return n[t]=e[t]}));["stack","message","name","arguments","type"].forEach((function(t){void 0!==e[t]&&(n[t]=e[t])}));var r=e.body||e._body;if(r&&!e.data&&e.headers){var o=e.headers.get("content-type");if(o&&"application/json"==o.toLowerCase())try{n.data=JSON.parse(r)}catch(e){}}return n},e.prototype.rethrow=function(e){throw this.add(e)},e}();function b(){return window}v.decorators=[{type:t.Injectable}];var C=function(){function e(){}return Object.defineProperty(e.prototype,"nativeElement",{get:function(){return b()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nativeWindow",{get:function(){return b()},enumerable:!1,configurable:!0}),e}();C.decorators=[{type:t.Injectable}];var w=function(){function e(e){this.WindowService=e,this.vars=this.parse()}return e.prototype.parse=function(){for(var e,t=/[?&]([^=#]+)(=([^&#]*))?/g,n=this.WindowService.nativeWindow.location.href,r={};e=t.exec(n);)r[e[1]]=null==e[2]||e[3];return r},e.prototype.get=function(e,t){if(e){if(this.vars&&null!=this.vars[e])return this.vars[e];var n=e.toLowerCase();for(var r in this.vars)if(n==r.toLowerCase())return this.vars[r];return t}},e}();w.decorators=[{type:t.Injectable}],w.ctorParameters=function(){return[{type:C}]};var E=function(){function e(){}return Object.defineProperty(e.prototype,"nativeElement",{get:function(){return document},enumerable:!1,configurable:!0}),e}();E.decorators=[{type:t.Injectable}];var x=[m,v,y,w,C,E,g,f],M=function(){function e(){this.headerTemplates=[],this.footerTemplates=[],this.leftBodyTemplates=[],this.rightBodyTemplates=[]}return e.prototype.unregisterHeaderTemplate=function(e){this.unregisterTemplateFrom(e,this.headerTemplates)},e.prototype.unregisterFooterTemplate=function(e){this.unregisterTemplateFrom(e,this.footerTemplates)},e.prototype.unregisterTemplateFrom=function(e,t){for(var n=t.length-1;n>=0;--n)if(t[n]===e){t.splice(n,1);break}},e.prototype.unregisterTemplate=function(e){this.unregisterTemplateFrom(e,this.headerTemplates),this.unregisterTemplateFrom(e,this.footerTemplates),this.unregisterTemplateFrom(e,this.leftBodyTemplates),this.unregisterTemplateFrom(e,this.rightBodyTemplates)},e}();M.decorators=[{type:t.Injectable}];var I='<ng-container [(htmlHeightModel)]="htmlHeightModel"></ng-container><ng-container *ngIf="SectionProvider.headerTemplates.length"><div *ngIf="mode===\'calculate\'" style="position:fixed;top:0;width:100%" [style.z-index]="zIndex" [(elementHeightModel)]="headerHeight" [elementSizeModelWatch]="SectionProvider.headerTemplates.length"><ng-template *ngTemplateOutlet="headerWrap || headerContent;context:{outlet:headerContent}"></ng-template></div><ng-template #headerContent=""><ng-container *ngFor="let item of SectionProvider.headerTemplates"><ng-template *ngTemplateOutlet="item"></ng-template></ng-container></ng-template><div *ngIf="!mode || mode===\'clone\'" style="position:fixed;top:0;width:100%" [style.z-index]="zIndex"><ng-template *ngTemplateOutlet="headerContent"></ng-template></div></ng-container><ng-template *ngTemplateOutlet="table || defaultTableTag;context:{outlet:tableRows}"></ng-template><ng-template #defaultTableTag=""><table style="height:100%;width:100%;border-collapse: collapse;" cellPadding="0" cellSpacing="0" border="0"><ng-template *ngTemplateOutlet="tableRows"></ng-template></table></ng-template><ng-template #tableRows=""><tr *ngIf="SectionProvider.headerTemplates.length"><td colspan="3" [style.height.px]="headerHeight" style="visibility:hidden"><ng-container *ngIf="!mode || mode===\'clone\'"><ng-container *ngFor="let item of SectionProvider.headerTemplates"><ng-template *ngTemplateOutlet="item"></ng-template></ng-container></ng-container></td></tr><tr><td *ngIf="SectionProvider.leftBodyTemplates.length" [style.min-width.px]="leftBodyWidth" valign="top" align="right"><ng-template #defaultLeftBodyWrap=""><div style="overflow:auto;height:100%;"><ng-template *ngTemplateOutlet="leftBodyContent"></ng-template></div></ng-template><ng-template #leftBodyContent=""><ng-container *ngFor="let item of SectionProvider.leftBodyTemplates"><ng-template *ngTemplateOutlet="item"></ng-template></ng-container></ng-template><div *ngIf="mode===\'calculate\'" style="position:fixed;" [style.z-index]="zIndex - 1" [style.height.px]="htmlHeightModel - (SectionProvider.headerTemplates.length ? headerHeight : 0) - (SectionProvider.footerTemplates.length ? footerHeight : 0)" [(elementWidthModel)]="leftBodyWidth" [elementSizeModelWatch]="SectionProvider.leftBodyTemplates.length"><ng-template *ngTemplateOutlet="leftBodyWrap || defaultLeftBodyWrap;context:{outlet:leftBodyContent}"></ng-template></div><div *ngIf="!mode || mode===\'clone\'" style="position:fixed;top:0;" [style.z-index]="zIndex - 1"><ng-template *ngTemplateOutlet="leftBodyWrap || defaultLeftBodyWrap;context:{outlet:leftBodyContent}"></ng-template></div><ng-container *ngIf="!mode || mode===\'clone\'"><ng-template *ngTemplateOutlet="leftBodyWrap || defaultLeftBodyWrap;context:{outlet:leftBodyContent}"></ng-template></ng-container></td><ng-container *ngTemplateOutlet="bodyCell || defaultBodyCell;context:{outlet:body}"></ng-container><ng-template #defaultBodyCell=""><td style="height:100%" valign="top"><ng-template *ngTemplateOutlet="body"></ng-template></td></ng-template><ng-template #body=""><ng-content></ng-content></ng-template><td *ngIf="SectionProvider.rightBodyTemplates.length" [style.min-width.px]="rightBodyWidth" valign="top" align="left"><ng-template #defaultRightBodyWrap=""><div style="overflow:auto;height:100%;"><ng-template *ngTemplateOutlet="rightBodyContent"></ng-template></div></ng-template><ng-template #rightBodyContent=""><ng-container *ngFor="let item of SectionProvider.rightBodyTemplates"><ng-template *ngTemplateOutlet="item"></ng-template></ng-container></ng-template><div *ngIf="mode===\'calculate\'" style="position:fixed;" [style.z-index]="zIndex - 1" [style.height.px]="htmlHeightModel - (SectionProvider.headerTemplates.length ? headerHeight : 0) - (SectionProvider.footerTemplates.length ? footerHeight : 0)" [(elementWidthModel)]="rightBodyWidth" [elementSizeModelWatch]="SectionProvider.rightBodyTemplates.length"><ng-template *ngTemplateOutlet="rightBodyWrap || defaultRightBodyWrap;context:{outlet:rightBodyContent}"></ng-template></div><div *ngIf="!mode || mode===\'clone\'" style="position:fixed;top:0;overflow:auto;" [style.z-index]="zIndex - 1"><ng-template *ngTemplateOutlet="rightBodyWrap || defaultRightBodyWrap;context:{outlet:rightBodyContent}"></ng-template></div><ng-container *ngIf="!mode || mode===\'clone\'"><ng-template *ngTemplateOutlet="rightBodyWrap || defaultRightBodyWrap;context:{outlet:rightBodyContent}"></ng-template></ng-container></td></tr><tr *ngIf="SectionProvider.footerTemplates.length"><td colspan="3" [style.height.px]="footerHeight"><div *ngIf="!mode || mode===\'clone\'" style="visibility:hidden"><ng-container *ngFor="let item of SectionProvider.footerTemplates"><ng-template *ngTemplateOutlet="item"></ng-template></ng-container></div></td></tr></ng-template><ng-container *ngIf="SectionProvider.footerTemplates.length"><div *ngIf="mode===\'calculate\'" style="position:fixed;bottom:0;width:100%" [style.z-index]="zIndex" [(elementHeightModel)]="footerHeight" [elementSizeModelWatch]="SectionProvider.footerTemplates.length"><ng-container *ngFor="let item of SectionProvider.footerTemplates"><ng-template *ngTemplateOutlet="item"></ng-template></ng-container></div><div *ngIf="!mode || mode===\'clone\'" style="position:fixed;bottom:0;width:100%" [style.z-index]="zIndex"><ng-container *ngFor="let item of SectionProvider.footerTemplates"><ng-template *ngTemplateOutlet="item"></ng-template></ng-container></div></ng-container>',k=function(e,t){this.SectionProvider=e,this.ElementRef=t,this.mode="calculate",this.zIndex=19;var n=t.nativeElement.style;n.height="100%",n.display="block"};k.decorators=[{type:t.Component,args:[{selector:"ack-sections",template:I,providers:[M]}]}],k.ctorParameters=function(){return[{type:M},{type:t.ElementRef}]},k.propDecorators={mode:[{type:t.Input}],zIndex:[{type:t.Input}],table:[{type:t.ContentChild,args:["table"]}],headerWrap:[{type:t.ContentChild,args:["headerWrap"]}],bodyCell:[{type:t.ContentChild,args:["bodyCell"]}],leftBodyWrap:[{type:t.ContentChild,args:["leftBodyWrap"]}],rightBodyWrap:[{type:t.ContentChild,args:["rightBodyWrap"]}]};var O=function(){function e(e){this.SectionProvider=e}return e.prototype.ngAfterViewInit=function(){var e=this;Promise.resolve().then((function(){e.check(),e.inited=!0}))},e.prototype.ngOnChanges=function(){this.inited&&this.check()},e.prototype.check=function(){this.pushed||(this.header&&this.SectionProvider.headerTemplates.unshift(this.header),this.footer&&this.SectionProvider.footerTemplates.unshift(this.footer),this.leftBody&&this.SectionProvider.leftBodyTemplates.unshift(this.leftBody),this.rightBody&&this.SectionProvider.rightBodyTemplates.unshift(this.rightBody),this.pushed=!0)},e.prototype.ngOnDestroy=function(){var e=this;Promise.resolve().then((function(){return e.unregister()}))},e.prototype.unregister=function(){this.pushed=!1,this.SectionProvider.unregisterHeaderTemplate(this.header),this.SectionProvider.unregisterFooterTemplate(this.footer),this.SectionProvider.unregisterTemplate(this.leftBody),this.SectionProvider.unregisterTemplate(this.rightBody)},e}();O.decorators=[{type:t.Directive,args:[{selector:"ack-section-templates"}]}],O.ctorParameters=function(){return[{type:M}]},O.propDecorators={header:[{type:t.ContentChild,args:["sectionHeader"]}],footer:[{type:t.ContentChild,args:["sectionFooter"]}],leftBody:[{type:t.ContentChild,args:["sectionLeftBody"]}],rightBody:[{type:t.ContentChild,args:["sectionRightBody"]}]};var S='<ng-template #placeholder=""><ack-modal-layout [zIndex]="zIndex" (close)="close.emit($event)" [isModelMode]="isModelMode==null ? showModelChange.observers.length : isModelMode" [showModel]="showModel" (showModelChange)="showModelChange.emit(showModel=$event)" [backgroundColor]="backgroundColor" [wrapStyle]="wrapStyle" [wrapCellStyle]="wrapCellStyle" [allowClose]="allowClose"><ng-template [ngTemplateOutlet]="body"></ng-template><ng-content *ngIf="!body"></ng-content></ack-modal-layout></ng-template><ng-template *ngIf="!AckApp.fixedElementStage || inline" [ngTemplateOutlet]="layout"></ng-template>',T=function(){function e(e,n){this.element=e,this.AckApp=n,this.allowClose=!0,this.zIndex=20,this.showModelChange=new t.EventEmitter,this.close=new t.EventEmitter}return e.prototype.ngOnInit=function(){this.determineStage()},e.prototype.determineStage=function(){this.inline||(this.AckApp.fixedElementStage?this.AckApp.registerModal(this):this.AckApp.warnedFixElements||(this.AckApp.warnedFixElements=!0,console.warn('Please put the element tag <ack-fixed-element-stage> inside your app so <ack-modal> renders properly amongst other elements. OR set <ack-modal inline="true">')))},e.prototype.ngOnDestroy=function(){this.AckApp.unregisterModal(this)},e}();T.decorators=[{type:t.Component,args:[{selector:"ack-modal",template:S}]}],T.ctorParameters=function(){return[{type:t.ElementRef},{type:y}]},T.propDecorators={body:[{type:t.ContentChild,args:["body"]}],layout:[{type:t.ViewChild,args:["placeholder"]}],inline:[{type:t.Input}],isModelMode:[{type:t.Input}],allowClose:[{type:t.Input}],zIndex:[{type:t.Input}],wrapStyle:[{type:t.Input}],wrapCellStyle:[{type:t.Input}],backgroundColor:[{type:t.Input}],showModel:[{type:t.Input}],showModelChange:[{type:t.Output}],close:[{type:t.Output}]};var D='<div *ngIf="showModel || !isModelMode" [@fadeInOutUp]="1" style="position:fixed;top:0;left:0;height:100%;width:100%;overflow:auto;" [style.z-index]="zIndex || 20"><div style="height:100%;width:100%;padding:20px;display:inline-table;" [ngStyle]="{\'background-color\':backgroundColor || \'rgba(0,0,0,.7)\'}"><table style="height:100%;margin:auto" border="0" align="center" cellpadding="0" cellspacing="0" [ngStyle]="wrapStyle"><tr><td (click)="allowClose ? fireClose() : 0"></td></tr><tr><td valign="top" [ngStyle]="wrapCellStyle"><div *ngIf="allowClose" style="position:relative"><div style="position:absolute;bottom:-17px;right:-16px;border:1px solid #DDD;border-radius:50%;z-index:20"><ack-close-icon (click)="fireClose()"></ack-close-icon></div></div><ng-content></ng-content></td></tr><tr><td (click)="allowClose ? fireClose() : 0"></td></tr></table></div></div>',P=function(){function e(e,n){var r=this;this.element=e,this.AckApp=n,this.zIndex=20,this.close=new t.EventEmitter,this.allowClose=!0,this.isModelMode=!1,this.showModel=!0,this.showModelChange=new t.EventEmitter,setTimeout((function(){return r.clickListenForClose()}),400)}return e.prototype.clickListenForClose=function(){var e=this;this.element.nativeElement.addEventListener("click",(function(t){if(!e.allowClose)return!1;var n=t.srcElement||t.toElement||t.target;return(n==e.element.nativeElement.children[0]||n==e.element.nativeElement.children[0].children[0])&&e.fireClose(),!0}))},e.prototype.ngOnInit=function(){var e=this;Promise.resolve().then((function(){(e.isModelMode||null==e.isModelMode&&e.showModelChange.observers.length)&&(e.isModelMode=!0)}))},e.prototype.fireClose=function(){this.showModelChange.emit(this.showModel=!1),this.close.emit(this)},e}();P.decorators=[{type:t.Component,args:[{selector:"ack-modal-layout",template:D,animations:r.animations}]}],P.ctorParameters=function(){return[{type:t.ElementRef},{type:y}]},P.propDecorators={zIndex:[{type:t.Input}],close:[{type:t.Output}],allowClose:[{type:t.Input}],wrapStyle:[{type:t.Input}],wrapCellStyle:[{type:t.Input}],backgroundColor:[{type:t.Input}],isModelMode:[{type:t.Input}],showModel:[{type:t.Input}],showModelChange:[{type:t.Output}]};var A='<ng-container *ngFor="let fixedElm of AckApp.fixedElms"><ng-container *ngTemplateOutlet="fixedElm.content"></ng-container></ng-container><ng-container *ngFor="let prompt of AckApp.prompts.prompts;let i=index"><ack-modal-layout zIndex="99" [allowClose]="0"><div style="text-align:left;max-width:900px;border:1px solid #DDD;border-radius:5px;margin:1em;padding:1em;background-color:white;"><h3 *ngIf="prompt.title" style="margin-top:0;">{{ prompt.title }}</h3><div style="padding-right:1em;">{{ prompt.message }}</div><br/><br/><div style="text-align:right;"><a *ngIf="prompt.type==\'confirm\'" (click)="prompt.emitter.emit(false)" style="text-align:center;display:inline-block;min-width:75px;border-radius:3px;border:1px solid #AAA;padding:0 .5em;margin-right:.5em;">Cancel</a><a (click)="prompt.emitter.emit(true)" style="text-align:center;display:inline-block;min-width:75px;border-radius:3px;border:1px solid #AAA;padding:0 .5em;" [ngStyle]="{\'font-weight\':prompt.type==\'confirm\' ? \'bold\' : null}">OK</a></div></div></ack-modal-layout></ng-container><ng-container *ngFor="let item of AckApp.modals"><ng-container *ngIf="!item.isModelMode || item.showModel"><ng-template [ngTemplateOutlet]="item.layout"></ng-template></ng-container></ng-container>',R=function(e,t){this.AckApp=e,this.ElementRef=t,e.fixedElementStage=t};R.decorators=[{type:t.Component,args:[{selector:"ack-fixed-element-stage",template:A}]}],R.ctorParameters=function(){return[{type:y},{type:t.ElementRef}]};var H=function(){function e(e){this.AckApp=e,this.AckApp.fixedElms.push(this)}return e.prototype.ngOnDestroy=function(){for(var e=this.AckApp.fixedElms.length-1;e>=0;--e){if(this.AckApp.fixedElms[e]===this){this.AckApp.fixedElms.splice(e,1);break}}},e}();H.decorators=[{type:t.Component,args:[{selector:"ack-fixed-element",template:"<ng-template #content><ng-content></ng-content></ng-template>"}]}],H.ctorParameters=function(){return[{type:y}]},H.propDecorators={content:[{type:t.ViewChild,args:["content"]}]};var B=function(){};function z(e){return function(e){if("function"==typeof e)return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e(t[0]);return t.shift(),L(r,t)};return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0];return t[0]=t[1],t[1]=r,L(e,[t])}}(e)}function L(e,t){for(var n,r,o,i,a=e,s=0;s<t.length;++s){if(i=t[s],n=[],null==a){var l="TypeError: Cannot read property '"+i+"' of "+typeof a+". Invoke instructions: "+JSON.stringify(t);throw new Error(l)}var p=i.constructor==Array;p&&((i=[]).push.apply(i,t[s]),o=i.shift(),n=i,i=o);var c=(r=a[i])&&r.constructor==Function;if(p&&!c&&(null==r||r.constructor!==Function)){l="TypeError: '"+i+"' of "+typeof r+" is not a function. Invoke instructions: "+JSON.stringify(t);throw new Error(l)}a=c?r.apply(a,n):r}return a}function W(e,t,n){return null!=t&&null!=n&&(e>=t&&e<=n||e<=t&&e>=n)}function F(e,t,n){return void 0===n&&(n="..."),(null==e?void 0:e.length)>t?e.slice(0,t)+n:e}function j(e){return null!=e&&e?0==(e=String(e).replace(/[^0-9]/g,"")).length?e:"("+e.substring(0,3)+") "+e.substring(3,6)+"-"+e.substring(6,10):e}function N(e){return Number(Y(e,"."))}function q(e,t){void 0===t&&(t=!1);var n=t?e:"";if(!(e=Number(e))||isNaN(e))return"";var r=e%10,o=e%100;return 1==r&&11!=o?n+"st":2==r&&12!=o?n+"nd":3==r&&13!=o?n+"rd":n+"th"}function K(e,t,n){var r=null!=e&&e.constructor==Array,o=r?e:[];if(t||r||null==e||o.push(e),t&&!isNaN(Number(t)))for(var i=void 0===n?e:n;o.length<t;)o.push(i);return o}function V(e){return(e=(e=(e=e.toString().replace(/&/gi,"amp")).toString().replace(/ /gi,"-")).replace(/[^a-z0-9_-]/gi,"")).toLowerCase()}function _(e){return null==e?e:"data:text/plain;charset=utf-8,"+encodeURIComponent(e)}function $(e){return null==e?e:e?"yes":"no"}function Q(e){return null==e?e:e?"Yes":"No"}function U(e){if(null==e)return!1;var t=Number(e);if(!isNaN(t))return!!Boolean(t);if(e.toLowerCase){if("true"==e.toLowerCase())return!0;if("false"==e.toLowerCase())return!1}return!!Boolean(e)}function Y(e,t){var n="[^0-9";t&&(t.length>4&&(t=t.substring(0,4)),n+=t),n+="]";var r=new RegExp(n,"g");return e?String(e).replace(r,""):e}function J(e){return e?e.replace(/[^\W_]+[^\s-]* */g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})):""}function G(e){return(e=oe.capitalizeOne(e))?e.replace(/[.?!][\s\r\t]+\w/g,oe.capitalizeAfterSentence):""}function X(e){return z((new o.ack)[e])}B.decorators=[{type:t.Component,args:[{selector:"ack-close-icon",template:'<div style="display:inline-block;cursor:pointer;border:3px solid white;border-radius:50%;background-color:#666;color:white;text-align:center;font-family:Arial"><div style="font-weight:bold;line-height:22px;font-size:23px;height:25px;width:25px">x</div></div>'}]}];var Z=X("date"),ee=X("time"),te=z(Math),ne=z(String),re=z(o.ack),oe={ack:re,aDate:Z,aMath:te,array:K,aString:ne,aTime:ee,between:W,capitalize:G,capitalizeAfterSentence:function(e){return e?e.replace(/[\s\r\t]\w/g,(function(e){return e.charAt(0)+e.charAt(1).toUpperCase()+e.substr(2).toLowerCase()})):""},capitalizeOne:function(e){return e?e.replace(/[^\W_]+[^\s-]*/,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})):""},capitalizeWords:J,numbers:Y,numberSuffix:q,numberToPhone:j,markdownAnchor:V,replaceMaxLength:F,textDownload:_,toNumber:N,yesno:$,yesNo:Q},ie=function(){function e(e){this.types={},this.templates={},Object.assign(this,e)}return e.prototype.readTemplates=function(e){for(var t=e._results.length-1;t>=0;--t){var n=e._results[t];this.applyReferences(n._def.references,n)}!this.lastTemplateName||this.templates[this.lastTemplateName]&&e.length||this.afterReadTemplates(e)},e.prototype.afterReadTemplates=function(e){var t=e._results.length-1,n=e._results[t];n&&this.lastTemplateName&&(this.applyReferences(n._def.references,n)||(this.templates[this.lastTemplateName]=n))},e.prototype.applyReferences=function(e,t){for(var n in e)if(this.types[n])return this.templates[this.types[n]]=t,!0;return!1},e}(),ae='<div [ngClass]="{\'border-grey-6x border-top\':stylize}"></div><div *ngFor="let item of array|array" (click)="selectItem(item)" [ngClass]="getItemClass(item)"><ng-template *ngIf="TemplateReader.templates.selected &amp;&amp; isItemSelected(item)" [ngTemplateOutlet]="TemplateReader.templates.selected" [ngTemplateOutletContext]="{item:item}"></ng-template><ng-template *ngIf="TemplateReader.templates.templateRef &amp;&amp; (!TemplateReader.templates.selected || !isItemSelected(item))" [ngTemplateOutlet]="TemplateReader.templates.templateRef" [ngTemplateOutletContext]="{item:item, selected:isItemSelected(item)}"></ng-template><span *ngIf="!TemplateReader.templates.templateRef">{{ item }}</span></div>',se=function(){function e(e){this.ElementRef=e,this.array=[],this.stylize=!0,this.TemplateReader=new ie({lastTemplateName:"templateRef",types:{option:"templateRef",selected:"selected"}}),this.modelChange=new t.EventEmitter}return e.prototype.ngAfterViewInit=function(){var e=this;Promise.resolve().then((function(){e.inputTemplateRefs&&e.TemplateReader.readTemplates(e.inputTemplateRefs),e.templateRefs&&e.TemplateReader.readTemplates(e.templateRefs)}))},e.prototype.selectItem=function(e){var t=this.getArrayItemValue(e);if(this.multiple||this.modelAsArray){var n=this.modelIndex(e);if(n>=0?this.model.splice(n,1):this.model.push(this.getArrayItemModel(e)),this.max)for(;this.model.length>this.max;)this.model.shift()}else this.toggleable&&this.model==t?delete this.model:this.model=this.getArrayItemModel(e);this.emitChange()},e.prototype.emitChange=function(){this.modelChange.emit(this.model);var e=function(e,t){var n;if(null===e||""===t)return;n=e.parentNode,t=t.toUpperCase();for(;n&&"HTML"!==n.tagName;){if(n.tagName===t)return n;n=n.parentNode}return}(this.ElementRef.nativeElement,"form");e&&this.fireFormEvents(e)},e.prototype.fireFormEvents=function(e){var t=document.createEvent("HTMLEvents");t.initEvent("input",!0,!0),e.dispatchEvent(t),(t=document.createEvent("HTMLEvents")).initEvent("change",!0,!0),e.dispatchEvent(t)},e.prototype.getArrayItemModel=function(e){if(null!=this.arrayToModelKey){if(""==this.arrayToModelKey)return e;for(var t=this.arrayToModelKey.split("."),n=e;t.length;){if(null==n)return null;n=n[t.shift()]}return n}return this.getArrayItemValue(e)},e.prototype.getArrayItemValue=function(e){if(!this.arrayKey)return e;for(var t=this.arrayKey.split("."),n=e;t.length;){if(null==n)return null;n=n[t.shift()]}return n},e.prototype.getModelValueToArrayItem=function(e){if(!this.modelKey)return e;for(var t=this.modelKey.split("."),n=e;t.length;){if(null==n)return null;n=n[t.shift()]}return n},e.prototype.modelIndex=function(e){this.model=K(this.model);for(var t=this.model.length-1;t>=0;--t){if(this.getArrayItemValue(e)==this.getModelValueToArrayItem(this.model[t]))return t}return-1},e.prototype.isItemSelected=function(e){return this.modelIndex(e)>=0},e.prototype.getItemClass=function(e){var t=this.isItemSelected(e),n="";return this.stylize&&(n+="cursor-pointer pad-h pad-v-sm border-grey-6x border-bottom "),this.stylize&&t&&(n+="bg-warning "),this.stylize&&!t&&(n+="hover-bg-grey-5x "),n},e}();se.decorators=[{type:t.Component,args:[{selector:"ack-options",template:ae}]}],se.ctorParameters=function(){return[{type:t.ElementRef}]},se.propDecorators={array:[{type:t.Input}],stylize:[{type:t.Input}],multiple:[{type:t.Input}],modelAsArray:[{type:t.Input}],max:[{type:t.Input}],toggleable:[{type:t.Input}],templateRefs:[{type:t.ContentChildren,args:[t.TemplateRef]}],inputTemplateRefs:[{type:t.Input}],model:[{type:t.Input}],modelChange:[{type:t.Output}],arrayKey:[{type:t.Input}],modelKey:[{type:t.Input}],arrayToModelKey:[{type:t.Input}]};var le='<ack-modal (close)="close.emit($event)" [allowClose]="allowClose" [showModel]="showModel" (showModelChange)="showModelChange.emit($event)" [isModelMode]="showModelChange.observers.length" [wrapStyle]="wrapStyle" [wrapCellStyle]="wrapCellStyle" [backgroundColor]="backgroundColor" (backgroundColorChange)="backgroundColorChange.emit($event)"><ng-content></ng-content><div class="border-grey-6x border bg-white"><ack-options #ackOptions="" [array]="array" [max]="max" [modelAsArray]="modelAsArray" [model]="model" (modelChange)="fireModelChange($event)" [multiple]="multiple" [toggleable]="toggleable" [stylize]="stylize" [inputTemplateRefs]="templateRefs" [arrayKey]="arrayKey" [arrayToModelKey]="arrayToModelKey" [modelKey]="modelKey"></ack-options></div></ack-modal>',pe=function(e){function n(){var n=e.apply(this,d(arguments))||this;return n.allowClose=!0,n.close=new t.EventEmitter,n.backgroundColorChange=new t.EventEmitter,n.showModel=!0,n.showModelChange=new t.EventEmitter,n}return u(n,e),n.prototype.fireModelChange=function(e){this.multiple||this.close.emit(),this.modelChange.emit(e)},n}(se);pe.decorators=[{type:t.Component,args:[{selector:"ack-options-modal",template:le}]}],pe.propDecorators={allowClose:[{type:t.Input}],wrapStyle:[{type:t.Input}],wrapCellStyle:[{type:t.Input}],close:[{type:t.Output}],backgroundColor:[{type:t.Input}],backgroundColorChange:[{type:t.Output}],showModel:[{type:t.Input}],showModelChange:[{type:t.Output}]};var ce='<div [(elementHeightModel)]="elementHeightModel" [ngClass]="wrapClass" [class.no-scroll-bars]="active &amp;&amp; !scrollBars &amp;&amp; scrollBars!=null" [ngStyle]="active ? {overflow:overflow,position:\'absolute\',width:\'100%\'} : {}"><ng-content></ng-content></div><div *ngIf="elementHeightModel &amp;&amp; active" style="visibility:hidden;overflow:hidden;width:100%" [style.height.px]="elementHeightModel">&nbsp;</div>',ue=function(){function e(e){this.ElementRef=e,this.active=!0,this.overflow="auto"}return e.prototype.ngOnInit=function(){this.checkDisplay()},e.prototype.ngOnChanges=function(e){e.active&&this.checkDisplay()},e.prototype.ngAfterViewInit=function(){this.ElementRef.nativeElement.style.display="block"},e.prototype.checkDisplay=function(){this.ElementRef.nativeElement.style.position=this.active?"relative":"static"},e}();ue.decorators=[{type:t.Component,args:[{selector:"absolute-overflow-x",template:ce}]}],ue.ctorParameters=function(){return[{type:t.ElementRef}]},ue.propDecorators={scrollBars:[{type:t.Input}],wrapClass:[{type:t.Input}],active:[{type:t.Input}],overflow:[{type:t.Input}]};var he='<div *ngIf="error!=null &amp;&amp; errorClose!=error" [@fadeInOutUp]="1"><div *ngIf="error &amp;&amp; closable" (click)="close.emit();errorClose=error" style="position:relative"><div style="position:absolute;bottom:-17px;right:-16px;border:1px solid #DDD;border-radius:50%;z-index:20"><ack-close-icon></ack-close-icon></div></div><div class="pad-xxs" *ngIf="error!=null &amp;&amp; errorClose!=error" [@fadeInOutUp]="1" [ngClass]="cssClasses"><div class="flex-valign-center flex-wrap child-margin-xxs"><div class="flex-1"><div class="strong text-3x margin-0" [class.cursor-pointer]="allowDetails" (click)="!allowDetails || moreDetails=!moreDetails">{{ getErrorMessage(error) }}</div></div><a class="text-blue underline text-xs" *ngIf="allowDetails &amp;&amp; error &amp;&amp; (error|typeof)!=\'string\'" (click)="moreDetails=!moreDetails">details</a></div><ng-container *ngTemplateOutlet="titleFooter"></ng-container><div *ngIf="moreDetails" [@fadeInOutUp]="1"><absolute-overflow-x class="text-sm"><pre class="margin-0 pad-xs">{{ error|json }}</pre></absolute-overflow-x></div></div></div>',de=function(){function e(){this.message="Unexpected Error Occured",this.closable=!0,this.allowDetails=!0,this.close=new t.EventEmitter}return e.prototype.ngOnInit=function(){this.cssClasses=this.cssClasses||"bg-danger border border-danger text-danger"},e.prototype.getErrorMessage=function(e){return e?"string"==typeof e?e:e.message||e.statusText||this.message:this.message},e}();de.decorators=[{type:t.Component,args:[{selector:"error-well",template:he,animations:r.animations}]}],de.propDecorators={moreDetails:[{type:t.Input}],message:[{type:t.Input}],error:[{type:t.Input}],cssClasses:[{type:t.Input}],closable:[{type:t.Input}],allowDetails:[{type:t.Input}],close:[{type:t.Output}],titleFooter:[{type:t.ContentChild,args:["titleFooter"]}]};var fe='<div style="text-align:center;height:100%"><div style="display:inline-block;width:100%;height:100%;max-width:1000px"><div style="width:100%;height:100%;"><table cellpadding="0" cellspacing="0" style="width:100%;height:100%;"><tr *ngIf="readerHeader"><td><ng-template *ngTemplateOutlet="readerHeader"></ng-template></td></tr><tr><td style="height:100%"><ng-content></ng-content></td></tr></table></div></div></div>',me=function(){};me.decorators=[{type:t.Component,args:[{selector:"reader-header-body",template:fe}]}],me.propDecorators={readerHeader:[{type:t.ContentChild,args:["reader-header"]}]};var ge=function(){};ge.decorators=[{type:t.Directive,args:[{selector:"reader-header"}]}];var ye=function(e){this.element=e,e.nativeElement.style.height="100%",e.nativeElement.style.display="block"};ye.decorators=[{type:t.Directive,args:[{selector:"reader-body"}]}],ye.ctorParameters=function(){return[{type:t.ElementRef}]},ye.propDecorators={readerHeader:[{type:t.ContentChild,args:["reader-header"]}]};var ve='<div class="child-pad-h-xs flex-wrap text-center" *ngIf="DebugItems.length&gt;1"><a class="cursor-pointer border border-grey-3x radius-5 flex-1" *ngFor="let item of DebugItems" [ngClass]="item===debugItem ? \'bg-positive text-white\' : \'\'" (click)="debugItem = debugItem===item ? null : item">{{item.name}}<ng-container *ngIf="item.type===\'array\'">&nbsp;( {{ item.value?.length || 0 }} )</ng-container></a></div><ng-container *ngIf="debugItem"><h3 class="margin-bottom-0">{{ debugItem.name }}</h3><ng-container *ngIf="debugItem.type===\'array\';else regdebug"><ng-container #loop="var" [var]="{view:0}"></ng-container><pre class="bg-grey-3x margin-0 sample-code" *ngFor="let data of debugItem.value;let ii=index"><ng-container *ngIf="loop.var.view==ii"><div class="flex-valign-center child-pad-xs" style="padding:.4em;float:right"><a class="fas fa-caret-square-left hover-bg-energized" (click)="loop.var.view=ii===0 ? debugItem.value.length-1 : ii-1">&lt;</a><a style="color:blue;" (click)="editsMap[ii]=!editsMap[ii]">edit</a><a style="color:blue;" (click)="debugItem.type=null">all</a><a class="fas fa-caret-square-right hover-bg-energized" (click)="loop.var.view=ii===debugItem.value.length-1 ? 0 : ii+1">&gt;</a></div><p><ng-container *ngIf="debugItem.rowTitle;else defaultRowLabel"><ng-template *ngTemplateOutlet="debugItem.rowTitle;context:{index:ii}"></ng-template></ng-container><ng-template #defaultRowLabel=""><strong>Result {{ii}} of {{debugItem.value.length}} </strong></ng-template></p><absolute-overflow-x *ngIf="!editsMap[ii]" style="font-size:0.8em;"><pre>{{ data | json }}</pre></absolute-overflow-x><ng-container *ngIf="editsMap[ii]"><textarea [name]="\'editsMap\' + ii" style="width:100%;height:300px" (change)="dataString = $event.target.value">{{ data | json }}</textarea><div style="text-align:center"><a style="color:blue;padding-top:.4em;" (click)="updateDataByJsonString(data, dataString, debugItem);editsMap[ii]=false">save</a></div></ng-container></ng-container></pre></ng-container><ng-template #regdebug=""><div class="pos-rel"><div class="pos-abs right-0 z-index-10"><div class="pad-xxs"><i class="fas fa-pencil-alt hover-text-energized" (click)="edit=!edit" [class.text-calm]="edit">edit</i></div></div></div><ng-container *ngIf="edit;else readMode"><textarea class="width-full" rows="30" (change)="apply(debugItem.value,$event.target.value, debugItem)" wrap="off">{{ debugItem.value | json }}</textarea></ng-container><ng-template #readMode=""><absolute-overflow-x><pre class="code-sample">{{ debugItem.value | json }}</pre></absolute-overflow-x></ng-template></ng-template></ng-container>',be=function(){this.save=new t.EventEmitter};be.decorators=[{type:t.Directive,args:[{selector:"debug-item"}]}],be.propDecorators={name:[{type:t.Input}],value:[{type:t.Input}],type:[{type:t.Input}],rowTitle:[{type:t.ContentChild,args:["rowTitle"]}],save:[{type:t.Output}]};var Ce=function(){function e(){this.editsMap={}}return e.prototype.ngAfterViewInit=function(){var e=this;1===this.DebugItems.length&&Promise.resolve().then((function(){return e.debugItem=e.DebugItems.first}))},e.prototype.updateDataByJsonString=function(e,t,n){try{var r=JSON.parse(t);for(var o in e)delete e[o];Object.assign(e,r),n.save.emit(e)}catch(e){console.error("invalid json string")}},e.prototype.apply=function(e,t,n){var r=JSON.parse(t);Object.assign(e,r),n.save.emit(e)},e}();Ce.decorators=[{type:t.Component,args:[{selector:"debug-area",template:ve}]}],Ce.propDecorators={DebugItems:[{type:t.ContentChildren,args:[be]}]};var we=[be,Ce],Ee=function(){this.outputChange=new t.EventEmitter};Ee.decorators=[{type:t.Directive,args:[{selector:"ack-aggregate"}]}],Ee.propDecorators={type:[{type:t.Input}],keys:[{type:t.Input}],output:[{type:t.Input}],outputChange:[{type:t.Output}]};var xe=function(){function e(e){this._iterableDiffers=e,this.pushed={},this.inSort=!1,this.sortArray=[],this.pageAt=0,this.pagesChange=new i.BehaviorSubject(null),this.page=0,this.pageChange=new t.EventEmitter,this.keyMapChange=new t.EventEmitter,this.loopStart=new t.EventEmitter,this.loopEach=new t.EventEmitter,this.loopEnd=new t.EventEmitter,this.arrayChange=new t.EventEmitter;var n=this._iterableDiffers.find([]);this.iterableDiffer=n.create()}return e.prototype.ngOnDestroy=function(){this.array$sub&&this.array$sub.unsubscribe()},e.prototype.ngOnInit=function(){var e=this;this.keyMapChange.observers.length&&(this.keyMap||Promise.resolve().then((function(){e.keyMap={},e.keyMapChange.emit(e.keyMap)})),this.pushCreateMap())},e.prototype.ngAfterViewInit=function(){var e=this;this.AckAggregates&&this.pushAggregates(this.AckAggregates),this.inited=!0,Promise.resolve().then((function(){return e.loop(!0)}))},e.prototype.ngDoCheck=function(){var e=this;this.inited&&(this.iterableDiffer.diff(this.array)&&Promise.resolve().then((function(){return e.loop(!1)})))},e.prototype.ngOnChanges=function(e){var t=this;e.array$&&(this.array$sub&&(this.array$sub.unsubscribe(),delete this.array$sub),this.array$&&(this.array$sub=this.array$.subscribe((function(e){if(t.merge)!function(e,t,n){for(var r=e.length-1;r>=0;--r){var o=e[r];if(!(s=t[r])||!Me(o,s,n)){for(var i=!1,a=t.length-1;a>=0;--a)if(Me(o,t[a],n)){i=!0;break}i||e.splice(r,1)}}for(r=0;r<t.length;++r){o=e[r];var s=t[r];i=!1;if(o&&Me(o,s,n))Ie(o,s);else{for(a=e.length-1;a>=0;--a)Me(o=e[a],s,n)&&(Ie(o,s),i=!0);i||e.splice(r,0,s)}}}(t.array,e,t.idKeys);else{var n=t.array!=e;t.array=e,t.loop(n)}}))));var n=!!e.array;e.pageAt&&(this.pushCreatePages(),n=!0),this.inited&&n&&Promise.resolve().then((function(){return t.loop(!0)}))},e.prototype.pushAggregates=function(e){var t=this;e.forEach((function(e){var n;e.type,t.loopStart.subscribe((function(){return n=0})),t.loopEach.subscribe((function(r){var o=t.getItemValueByKeys(r.item,e.keys);o&&(n+=o)})),t.loopEnd.subscribe((function(){e.output=n,e.outputChange.emit(n)}))}))},e.prototype.getItemValueByKeys=function(e,t){for(var n=0;n<t.length;++n){if(null==(e=e[t[n]]))return null}return e},e.prototype.loop=function(e){this.array||(this.array=[]),this.loopStart.emit(e);for(var t=this.array.length,n=0;n<t;++n)this.loopEach.emit({index:n,item:this.array[n]});this.loopEnd.emit()},e.prototype.pushCreateMap=function(){var e=this;this.pushed.createMap||(this.pushed.createMap=!0,this.loopStart.subscribe((function(){return e.keyMap={}})),this.loopEach.subscribe((function(t){var n=e.getItemId(t.item);e.keyMap[n]=t.item})),this.loopEnd.subscribe((function(){return e.keyMapChange.emit(e.keyMap)})))},e.prototype.pushCreatePages=function(){var e=this;if(!this.pushed.createPages){this.pushed.createPages=!0;var t=0,n=0;this.loopStart.subscribe((function(r){t=0,n=e.array.length,r&&e.pageChange.emit(e.page=0),e.pages=e.pages||[],e.pages.length=0,e.pages.push([])})),this.loopEach.subscribe((function(r){e.pages[t].push(r.item),e.pages[t].length==e.pageAt&&r.index<n-1&&(e.pages.push([]),++t)})),this.loopEnd.subscribe((function(){e.page&&e.page>=e.pages.length&&e.pageChange.emit(e.page=0),e.pagesChange.next(e.pages)}))}},e.prototype.only=function(e){this.array.length=0,this.array.push(e),this.arrayChange.emit(this.array),this.loop(!0)},e.prototype.getItemId=function(e){return this.idKeys&&this.idKeys[0]&&e[this.idKeys[0]]},e.prototype.getCompareArray=function(){if(this.array&&this.idKeys&&this.idKeys.length){var e=this.idKeys[0];return this.array.map((function(t){return t[e]}))}return this.array||[]},e.prototype.itemIndex=function(e){for(var t=this.getCompareArray(),n=t.length-1;n>=0;--n)if(Me(t[n],e,this.idKeys))return n;return-1},e.prototype.toggle=function(e){var t=this.itemIndex(e);return t>=0?this.splice(t):this.push(e)},e.prototype.push=function(e){return this.param().push(e),this.loop(!1),this},e.prototype.unshift=function(e){return this.param().unshift(e),this},e.prototype.splice=function(e,t){return void 0===t&&(t=1),this.param().splice(e,t),this.loop(!1),this},e.prototype.param=function(){return this.array||this.arrayChange.emit(this.array=[]),this.array},e.prototype.toggleSort=function(e,t){if(this.inSort)return!1;this.inSort=!0;var n=!1;this.sortArray.length&&this.sortArray[0].arrayKey?(n=!this.sortArray[0].asc,this.sortArray[0]={arrayKey:e,asc:!this.sortArray[0].asc}):this.sortArray.unshift({arrayKey:e,asc:n});var r=function(t,n){void 0===n&&(n=0);var o=t[e[n]];return null==o||n==e.length-1?o:r(o,n+1)};if(e.constructor!=Array&&(e=[e]),!isNaN(t)||["int","number"].indexOf(t)>=0)n?this.array.sort((function(e,t){return Number(r(e))-Number(r(t))})):this.array.sort((function(e,t){return Number(r(t))-Number(r(e))}));else switch(t){case"date":case"time":case"datetime":n?this.array.sort((function(e,t){return e=new Date(r(e,0)),t=new Date(r(t,0)),"Invalid Date"==e||e>t?-1:"Invalid Date"==t||e<t?1:0})):this.array.sort((function(e,t){return t=new Date(r(t,0)),e=new Date(r(e,0)),"Invalid Date"==t||t>e?-1:"Invalid Date"==e||t<e?1:0}));break;default:n?this.array.sort((function(e,t){return String(r(e)||"").toLowerCase()>String(r(t)||"").toLowerCase()?1:-1})):this.array.sort((function(e,t){return String(r(t)||"").toLowerCase()>String(r(e)||"").toLowerCase()?1:-1}))}this.sortArray.length>3&&this.sortArray.pop(),this.inSort=!1,this.loop(!0)},e}();function Me(e,t,n){for(var r=n.length-1;r>=0;--r){var o=n[r];if(null!=e[o]&&e[o]!==t[o])return!1}return!0}function Ie(e,t){for(var n in e)delete e[n];Object.assign(e,t)}xe.decorators=[{type:t.Directive,args:[{selector:"ack-array",exportAs:"AckArray"}]}],xe.ctorParameters=function(){return[{type:t.IterableDiffers}]},xe.propDecorators={pageAt:[{type:t.Input}],pages:[{type:t.Input}],pagesChange:[{type:t.Output}],page:[{type:t.Input}],pageChange:[{type:t.Output}],keyMap:[{type:t.Input}],keyMapChange:[{type:t.Output}],AckAggregates:[{type:t.ContentChildren,args:[Ee]}],idKeys:[{type:t.Input}],merge:[{type:t.Input}],array:[{type:t.Input}],arrayChange:[{type:t.Output}],array$:[{type:t.Input}]};var ke='<div style="width:100%;top:0;z-index:1" [style.position]="currentPosition"><ng-content></ng-content></div><div [style.height.px]="fillHeight"></div>',Oe=function(){function e(e){this.ElementRef=e}return e.prototype.getReadElement=function(){var e=this.ElementRef.nativeElement.children;return e[e.length-2]},e.prototype.init=function(){var e=this;this.onScroll=function(){return e.check()},window.addEventListener("scroll",this.onScroll),this.onScroll()},e.prototype.ngAfterViewInit=function(){var e=this;Promise.resolve().then((function(){return e.init()}))},e.prototype.check=function(){var e=window.pageYOffset;if(!(this.placeholder&&this.placeholder<=e)){var t=this.getReadElement(),n=this.placeholder||function(e){var t=0;for(;e;)t+=e.offsetTop,e=e.offsetParent;return t}(t);n<=e?(this.currentPosition="fixed",this.placeholder=n,this.fillHeight=t.offsetHeight):(delete this.fillHeight,delete this.placeholder,delete this.currentPosition)}},e}();Oe.decorators=[{type:t.Component,args:[{selector:"scroll-past-fixed",template:ke}]}],Oe.ctorParameters=function(){return[{type:t.ElementRef}]},Oe.propDecorators={template:[{type:t.ViewChild,args:["template"]}]};var Se=function(){function e(e){this.element=e,this.fxThen=new t.EventEmitter,this.fxTypes=["bounce","flash","pulse","rubberBand","shake","swing","tada","wobble","jello","bounceIn","bounceInDown","bounceInLeft","bounceInRight","bounceInUp"]}return e.prototype.ngOnInit=function(){var e=this;Promise.resolve().then((function(){return e.update()}))},e.prototype.update=function(){this.fxOn?this.onTrue():this.onFalse()},e.prototype.ngOnChanges=function(e){e.fxOn&&null!=e.fxOn.currentValue&&e.fxOn.currentValue!=e.fxOn.previousValue&&this.update(),e.fxClass&&e.fxClass.currentValue!=e.fxClass.previousValue&&(this.fxOn?(Pe(this.element.nativeElement,e.fxClass.previousValue),this.applyType()):this.removeType())},e.prototype.onFalse=function(){this.removeType(),this.timeout&&(clearTimeout(this.timeout),delete this.timeout)},e.prototype.removeType=function(){var e=this.element.nativeElement;Pe(e,this.fxClass),this.inlineTreated&&(e.style.display="inline",this.inlineTreated=!1)},e.prototype.applyType=function(){var e,t=this.element.nativeElement;(t.style&&"inline"===t.style.display||"inline"===(e=t,("getComputedStyle"in window?window.getComputedStyle(e,""):e.currentStyle).display))&&(this.inlineTreated=!0,t.style.display="inline-block"),De(t,this.fxClass)},e.prototype.onTrue=function(){var e=this;this.applyType(),this.fxForMs&&(this.timeout=setTimeout((function(){e.onFalse(),e.fxThen.emit()}),this.fxForMs))},e}();function Te(e,t){for(var n=t.split(" "),r=n.length-1;r>=0;--r){if(e.classList){if(e.classList.contains(n[r]))continue}else if(e.className.match(new RegExp("(\\s|^)"+n[r]+"(\\s|$)")))continue;return!1}return!0}function De(e,t){t.split(" ").forEach((function(t){e.classList?e.classList.add(t):Te(e,t)||(e.className+=" "+t)}))}function Pe(e,t){t.split(" ").forEach((function(t){if(e.classList)e.classList.remove(t);else if(Te(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")}}))}Se.decorators=[{type:t.Directive,args:[{selector:"[fxOn]",exportAs:"FxOn"}]}],Se.ctorParameters=function(){return[{type:t.ElementRef}]},Se.propDecorators={fxOn:[{type:t.Input}],fxClass:[{type:t.Input}],fxForMs:[{type:t.Input}],fxThen:[{type:t.Output}]};var Ae=function(){function e(e){this.element=e,this.shakeConstant=!1,this.shakeThen=new t.EventEmitter,this.shakeTypes=["shake-slow","shake-hard","shake-little","shake-horizontal","shake-vertical","shake-rotate","shake-opacity","shake-crazy","shake-chunk"]}return e.prototype.ngOnInit=function(){var e=this;Promise.resolve().then((function(){return e.update()}))},e.prototype.update=function(){this.shakeForMs=this.shakeForMs||2e3,this.shakeType=this.shakeType||"shake-slow"},e.prototype.ngOnChanges=function(e){if(e.shakeOn&&null!=e.shakeOn.currentValue&&e.shakeOn.currentValue!=e.shakeOn.previousValue&&(e.shakeOn.currentValue?this.onTrue():this.onFalse()),e.shakeType&&e.shakeType.currentValue!=e.shakeType.previousValue)if(this.shakeOn){var t=e.shakeType.previousValue;t&&Pe(this.element.nativeElement,t),this.applyType()}else this.removeType()},e.prototype.onFalse=function(){Pe(this.element.nativeElement,"shake-constant"),this.removeType(),this.timeout&&(clearTimeout(this.timeout),delete this.timeout)},e.prototype.removeType=function(){Pe(this.element.nativeElement,this.shakeType||"shake-slow")},e.prototype.applyType=function(){De(this.element.nativeElement,this.shakeType||"shake-slow")},e.prototype.onTrue=function(){var e=this;De(this.element.nativeElement,"shake-constant"),this.applyType(),this.shakeConstant||(this.timeout=setTimeout((function(){e.onFalse(),e.shakeThen.emit(e)}),this.shakeForMs))},e}();Ae.decorators=[{type:t.Directive,args:[{selector:"[shakeOn]",exportAs:"ShakeOn"}]}],Ae.ctorParameters=function(){return[{type:t.ElementRef}]},Ae.propDecorators={shakeConstant:[{type:t.Input}],shakeOn:[{type:t.Input}],shakeForMs:[{type:t.Input}],shakeType:[{type:t.Input}],shakeThen:[{type:t.Output}]};var Re=function(){function e(e){this.element=e,this.focusOnDelay=0,this.focusThen=new t.EventEmitter}return e.prototype.ngOnChanges=function(e){var t=this;e.focusOn&&e.focusOn.currentValue&&(0===this.focusOnDelay?Promise.resolve().then((function(){return t.update()})):setTimeout((function(){return t.update()}),this.focusOnDelay))},e.prototype.update=function(){this.element.nativeElement.focus(),this.focusThen.emit()},e}();Re.decorators=[{type:t.Directive,args:[{selector:"[focusOn]"}]}],Re.ctorParameters=function(){return[{type:t.ElementRef}]},Re.propDecorators={focusOn:[{type:t.Input}],focusOnDelay:[{type:t.Input}],focusThen:[{type:t.Output}]};var He=function(){function e(){this.init=new t.EventEmitter}return e.prototype.ngOnInit=function(){this.init.emit()},e}();He.decorators=[{type:t.Directive,args:[{selector:"[init]"}]}],He.propDecorators={init:[{type:t.Output}]};var Be=function(){function e(e){this.elm=e,this.changeDone=new t.EventEmitter,this.inputChange=new t.EventEmitter,this.contentModelChange=new t.EventEmitter,this.enterEnds=!1,this.enter=new t.EventEmitter,this.recentInputs=0,this.elm.nativeElement.setAttribute("contenteditable",!0)}return e.prototype.ngOnDestroy=function(){this.elm.nativeElement.removeAttribute("contenteditable")},e.prototype.ngOnChanges=function(){var e=this.elm.nativeElement;this.recentInputs?--this.recentInputs:this.evalPlaceholder()||(e.textContent=this.contentModel)},e.prototype.evalPlaceholder=function(e){var t=this.elm.nativeElement;return!(null!=this.contentModel&&""!==this.contentModel)&&(t.textContent=null==e?this.placeholder:e,!0)},e.prototype.onKeyDown=function(e){this.checkplaceholder();var t=e.which||e.keyCode;if(this.enterEnds&&13===t)return e.preventDefault(),e.stopPropagation(),this.onBlur(),void this.enter.emit();if(this.maxLength){var n=this.elm.nativeElement.textContent,r=Number(this.maxLength);if(this.maxLength&&n.length>r)if(!([8,46].indexOf(t)>=0))return e.preventDefault(),void e.stopPropagation()}},e.prototype.onInput=function(){var e=this.elm.nativeElement.textContent,t=Number(this.maxLength);this.maxLength&&e.length>t||(++this.recentInputs,this.contentModel=e,this.contentModelChange.emit(this.contentModel),this.inputChange.emit(this.contentModel))},e.prototype.onFocus=function(){this.lastValue=this.contentModel,this.evalPlaceholder("")},e.prototype.checkplaceholder=function(){this.placeholder&&this.elm.nativeElement.textContent===this.placeholder&&(this.elm.nativeElement.textContent="")},e.prototype.onBlur=function(){this.lastValue!==this.elm.nativeElement.textContent&&(this.contentModelChange.emit(this.contentModel),this.changeDone.emit(this.contentModel)),this.evalPlaceholder()},e}();Be.decorators=[{type:t.Directive,args:[{selector:"[contentModel]"}]}],Be.ctorParameters=function(){return[{type:t.ElementRef}]},Be.propDecorators={changeDone:[{type:t.Output}],contentModel:[{type:t.Input}],inputChange:[{type:t.Output}],contentModelChange:[{type:t.Output}],placeholder:[{type:t.Input}],maxLength:[{type:t.Input}],enterEnds:[{type:t.Input}],enter:[{type:t.Output}],onKeyDown:[{type:t.HostListener,args:["keydown",["$event"]]}],onInput:[{type:t.HostListener,args:["input"]}],onFocus:[{type:t.HostListener,args:["focus"]}],onBlur:[{type:t.HostListener,args:["blur"]}]};var ze=function(){function e(e){this.element=e,this.selectOnDelay=0,this.selectThen=new t.EventEmitter}return e.prototype.ngOnChanges=function(e){var t=this;e.selectOn&&e.selectOn.currentValue&&(0===this.selectOnDelay&&Promise.resolve().then((function(){return t.update()})),setTimeout((function(){return t.update()}),this.selectOnDelay))},e.prototype.update=function(){this.element.nativeElement.select(),this.selectThen.emit()},e}();ze.decorators=[{type:t.Directive,args:[{selector:"[selectOn]"}]}],ze.ctorParameters=function(){return[{type:t.ElementRef}]},ze.propDecorators={selectOn:[{type:t.Input}],selectOnDelay:[{type:t.Input}],selectThen:[{type:t.Output}]};var Le=function(){function e(e){var n=this;this.element=e,this.innerHtmlModelChange=new t.EventEmitter,this.observer=new MutationObserver((function(){return n.setModel()}));this.observer.observe(this.element.nativeElement,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}return e.prototype.ngOnChanges=function(){var e=this;Promise.resolve().then((function(){return e.setModel()}))},e.prototype.setModel=function(){this.innerHtmlModel=this.element.nativeElement.innerHTML,this.innerHtmlModelChange.emit(this.innerHtmlModel)},e.prototype.ngOnDestroy=function(){this.observer.disconnect()},e}();Le.decorators=[{type:t.Directive,args:[{selector:"[innerHtmlModel]"}]}],Le.ctorParameters=function(){return[{type:t.ElementRef}]},Le.propDecorators={innerHtmlModel:[{type:t.Input}],innerHtmlModelChange:[{type:t.Output}]};var We=function(){function e(){this.replaceModelChange=new t.EventEmitter}return e.prototype.ngOnChanges=function(e){var t=this;e.replaceModel&&this.replaceModel&&this.replaceModel.constructor===String&&Promise.resolve().then((function(){return t.run()}))},e.prototype.run=function(){var e=new RegExp(this.replaceExpression,"gi"),t=this.replaceModel,n=this.replaceModel.replace(e,"");t!==n&&(this.replaceModel=n,this.replaceModelChange.emit(this.replaceModel))},e}();We.decorators=[{type:t.Directive,args:[{selector:"[replaceModel]"}]}],We.propDecorators={replaceModel:[{type:t.Input}],replaceModelChange:[{type:t.Output}],replaceExpression:[{type:t.Input}]};var Fe=function(){function e(e){this.element=e,this.elementSizeModelChange=new t.EventEmitter}return e.prototype.ngAfterViewInit=function(){var e=this;this.onResize=function(){e.setModel()},window.addEventListener("resize",this.onResize),Promise.resolve().then((function(){return e.setModel()})),this.observer=new MutationObserver((function(){e.setModel()}));this.observer.observe(this.element.nativeElement,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),setTimeout((function(){return e.setModel()}),800)},e.prototype.ngOnChanges=function(){var e=this;Promise.resolve().then((function(){e.inChange||e.setModel()}))},e.prototype.setModel=function(){var e=this;this.elementSizeModel=this.elementSizeModel||{},this.inChange=!0,this.elementSizeModel.width=this.element.nativeElement.offsetWidth,this.elementSizeModel.height=this.element.nativeElement.offsetHeight,this.elementSizeModelChange.emit(this.elementSizeModel),Promise.resolve().then((function(){e.inChange=!1}))},e.prototype.ngOnDestroy=function(){this.observer.disconnect(),window.removeEventListener("resize",this.onResize)},e}();Fe.decorators=[{type:t.Directive,args:[{selector:"[elementSizeModel]"}]}],Fe.ctorParameters=function(){return[{type:t.ElementRef}]},Fe.propDecorators={elementSizeModelWatch:[{type:t.Input}],elementSizeModel:[{type:t.Input}],elementSizeModelChange:[{type:t.Output}]};var je=function(e){function n(n){var r=e.call(this,n)||this;return r.element=n,r.elementHeightModelChange=new t.EventEmitter,r}return u(n,e),n.prototype.setModel=function(){this.elementHeightModel=this.element.nativeElement.offsetHeight,this.elementHeightModelChange.emit(this.elementHeightModel)},n}(Fe);je.decorators=[{type:t.Directive,args:[{selector:"[elementHeightModel]"}]}],je.ctorParameters=function(){return[{type:t.ElementRef}]},je.propDecorators={elementHeightModel:[{type:t.Input}],elementHeightModelChange:[{type:t.Output}]};var Ne=function(e){function n(n){var r=e.call(this,n)||this;return r.element=n,r.elementWidthModelChange=new t.EventEmitter,r}return u(n,e),n.prototype.setModel=function(){this.elementWidthModel=this.element.nativeElement.offsetWidth,this.elementWidthModelChange.emit(this.elementWidthModel)},n}(Fe);Ne.decorators=[{type:t.Directive,args:[{selector:"[elementWidthModel]",exportAs:"ElementWidthModel"}]}],Ne.ctorParameters=function(){return[{type:t.ElementRef}]},Ne.propDecorators={elementWidthModel:[{type:t.Input}],elementWidthModelChange:[{type:t.Output}]};var qe=function(){function e(){var e=this;this.screenScrollHeightDiffChange=new t.EventEmitter,this.on=function(){e.apply()},window.addEventListener("scroll",this.on),window.addEventListener("resize",this.on)}return e.prototype.apply=function(){this.screenScrollHeightDiff=document.body.scrollHeight-window.innerHeight,this.screenScrollHeightDiff<0&&(this.screenScrollHeightDiff=0),this.screenScrollHeightDiffChange.emit(this.screenScrollHeightDiff)},e.prototype.ngOnDestroy=function(){window.removeEventListener("scroll",this.on),window.removeEventListener("resize",this.on)},e}();qe.decorators=[{type:t.Directive,args:[{selector:"[screenScrollHeightDiff]"}]}],qe.ctorParameters=function(){return[]},qe.propDecorators={screenScrollHeightDiff:[{type:t.Input}],screenScrollHeightDiffChange:[{type:t.Output}]};var Ke=function(){function e(){var e=this;this.screenScroll=new t.EventEmitter,this.onScroll=function(){return e.screenScroll.emit({x:window.pageXOffset,y:window.pageYOffset})},this.onScroll(),window.addEventListener("scroll",this.onScroll)}return e.prototype.ngOnInit=function(){var e=this;Promise.resolve().then((function(){return e.onScroll()}))},e.prototype.ngOnDestroy=function(){window.removeEventListener("scroll",this.onScroll)},e}();Ke.decorators=[{type:t.Directive,args:[{selector:"[screenScroll]"}]}],Ke.ctorParameters=function(){return[]},Ke.propDecorators={screenScroll:[{type:t.Output}]};var Ve=function(){function e(e){var n=this;this.ElementRef=e,this.numberChange=new t.EventEmitter,this.onScroll=function(){n.setter(),n.emit()},window.addEventListener("resize",this.onScroll),window.addEventListener("scroll",this.onScroll)}return e.prototype.emit=function(){this.numberChange.emit(this.number)},e.prototype.ngOnChanges=function(){var e=this;Promise.resolve().then((function(){e.setter(),e.emit()})),this.delayFire(250),this.delayFire(750),this.delayFire(1500)},e.prototype.setter=function(){var e=this.ElementRef.nativeElement.getBoundingClientRect().top;this.number=e},e.prototype.ngAfterViewInit=function(){this.delayFire(),this.delayFire(200)},e.prototype.delayFire=function(e){var t=this;void 0===e&&(e=0),setTimeout((function(){t.setter(),t.emit()}),e)},e.prototype.ngOnDestroy=function(){window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onScroll)},e}();Ve.decorators=[{type:t.Directive,args:[{selector:"[pxFromHtmlTop]",exportAs:"PxFromHtmlTop"}]}],Ve.ctorParameters=function(){return[{type:t.ElementRef}]},Ve.propDecorators={number:[{type:t.Input,args:["pxFromHtmlTop"]}],numberChange:[{type:t.Output,args:["pxFromHtmlTopChange"]}],watch:[{type:t.Input}]};var _e=function(){function e(){var e=this;this.screenScrollModelYChange=new t.EventEmitter,this.onScroll=function(){e.screenScrollModelY=window.pageYOffset,e.screenScrollModelYChange.emit(e.screenScrollModelY)},this.onScroll(),window.addEventListener("scroll",this.onScroll)}return e.prototype.ngOnInit=function(){var e=this;Promise.resolve().then((function(){return e.onScroll()}))},e.prototype.ngOnDestroy=function(){window.removeEventListener("scroll",this.onScroll)},e}();_e.decorators=[{type:t.Directive,args:[{selector:"[screenScrollModelY]",exportAs:"ScreenScrollModelY"}]}],_e.ctorParameters=function(){return[]},_e.propDecorators={screenScrollModelY:[{type:t.Input}],screenScrollModelYChange:[{type:t.Output}]};var $e=function(){function e(e){var n=this;this.HtmlSizeService=e,this.screenWidthModelChange=new t.EventEmitter,this.sub=this.HtmlSizeService.change.subscribe((function(){return n.changed()})),this.HtmlSizeService.checkWatchers(),this.HtmlSizeService.htmlSize&&this.changed()}return e.prototype.changed=function(){this.HtmlSizeService.htmlSize&&this.hasChanged()&&this.updateModel()},e.prototype.hasChanged=function(){return this.screenWidthModel!==window.innerWidth},e.prototype.updateModel=function(){this.screenWidthModel=window.innerWidth,this.screenWidthModelChange.emit(this.screenWidthModel)},e}();$e.decorators=[{type:t.Directive,args:[{selector:"[screenWidthModel]"}]}],$e.ctorParameters=function(){return[{type:f}]},$e.propDecorators={screenWidthModel:[{type:t.Input}],screenWidthModelChange:[{type:t.Output}]};var Qe=function(){function e(e){var n=this;this.HtmlSizeService=e,this.modelChange=new t.EventEmitter,this.sub=this.HtmlSizeService.change.subscribe((function(){return n.changed()})),this.HtmlSizeService.checkWatchers()}return e.prototype.ngAfterViewInit=function(){var e=this;Promise.resolve().then((function(){return e.updateModel()})),this.delayCheck(250),this.delayCheck(1500)},e.prototype.delayCheck=function(e){var t=this;void 0===e&&(e=0),setTimeout((function(){return t.updateModel()}),e)},e.prototype.changed=function(){this.HtmlSizeService.htmlSize&&this.hasChanged()&&this.updateModel()},e.prototype.hasChanged=function(){return this.model!==window.innerHeight},e.prototype.updateModel=function(){this.model=window.innerHeight,this.modelChange.emit(this.model)},e}();Qe.decorators=[{type:t.Directive,args:[{selector:"[screenHeightModel]",exportAs:"ScreenHeightModel"}]}],Qe.ctorParameters=function(){return[{type:f}]},Qe.propDecorators={model:[{type:t.Input,args:["screenHeightModel"]}],modelChange:[{type:t.Output,args:["screenHeightModelChange"]}]};var Ue=function(){function e(e){var n=this;this.HtmlSizeService=e,this.htmlWidthModelChange=new t.EventEmitter,this.sub=this.HtmlSizeService.change.subscribe((function(){return n.changed()})),this.HtmlSizeService.checkWatchers()}return e.prototype.ngAfterViewInit=function(){var e=this;Promise.resolve().then((function(){return e.changed()}))},e.prototype.ngOnDestroy=function(){this.sub.unsubscribe(),this.HtmlSizeService.checkWatchers()},e.prototype.changed=function(){this.HtmlSizeService.htmlSize&&this.hasChanged()&&this.setModel(this.HtmlSizeService.htmlSize)},e.prototype.hasChanged=function(){return this.htmlWidthModel!==window.document.documentElement.clientWidth},e.prototype.setModel=function(e){this.htmlWidthModel=e.width,this.htmlWidthModelChange.emit(this.htmlWidthModel)},e}();Ue.decorators=[{type:t.Directive,args:[{selector:"[htmlWidthModel]"}]}],Ue.ctorParameters=function(){return[{type:f}]},Ue.propDecorators={htmlWidthModel:[{type:t.Input}],htmlWidthModelChange:[{type:t.Output}]};var Ye=function(e){function n(n){var r=e.call(this,n)||this;return r.HtmlSizeService=n,r.htmlHeightModelChange=new t.EventEmitter,r}return u(n,e),n.prototype.hasChanged=function(){return this.htmlHeightModel!==window.document.documentElement.clientHeight},n.prototype.setModel=function(e){this.htmlHeightModel=e.height,this.htmlHeightModelChange.emit(this.htmlHeightModel)},n}(Ue);Ye.decorators=[{type:t.Directive,args:[{selector:"[htmlHeightModel]"}]}],Ye.ctorParameters=function(){return[{type:f}]},Ye.propDecorators={htmlHeightModel:[{type:t.Input}],htmlHeightModelChange:[{type:t.Output}]};var Je=function(){function e(){var e=this;this.statusOnlineModelChange=new t.EventEmitter,this.onChange=function(){e.statusOnlineModel=navigator.onLine,e.statusOnlineModelChange.emit(e.statusOnlineModel)},window.addEventListener("online",this.onChange),window.addEventListener("offline",this.onChange),Promise.resolve().then((function(){return e.onChange()}))}return e.prototype.ngOnDestroy=function(){window.removeEventListener("online",this.onChange),window.removeEventListener("offline",this.onChange)},e}();Je.decorators=[{type:t.Directive,args:[{selector:"[statusOnlineModel]"}]}],Je.ctorParameters=function(){return[]},Je.propDecorators={statusOnlineModel:[{type:t.Input}],statusOnlineModelChange:[{type:t.Output}]};var Ge=function(){function e(){var e=this;this.statusOfflineModelChange=new t.EventEmitter,this.onChange=function(){e.statusOfflineModel=!navigator.onLine,e.statusOfflineModelChange.emit(e.statusOfflineModel)},window.addEventListener("offline",this.onChange),window.addEventListener("online",this.onChange),Promise.resolve().then((function(){return e.onChange()}))}return e.prototype.ngOnDestroy=function(){window.removeEventListener("offline",this.onChange),window.removeEventListener("online",this.onChange)},e}();Ge.decorators=[{type:t.Directive,args:[{selector:"[statusOfflineModel]"}]}],Ge.ctorParameters=function(){return[]},Ge.propDecorators={statusOfflineModel:[{type:t.Input}],statusOfflineModelChange:[{type:t.Output}]};var Xe=function(){function e(){this.changed=new t.EventEmitter}return e.prototype.ngOnChanges=function(e){var t=this;e.var&&Promise.resolve().then((function(){return t.changed.emit(t.var)}))},e}();Xe.decorators=[{type:t.Directive,args:[{selector:"[var]",exportAs:"var"}]}],Xe.propDecorators={var:[{type:t.Input}],changed:[{type:t.Output}]};var Ze=function(e){var n=this;this.element=e,this.enterKey=new t.EventEmitter,e.nativeElement.addEventListener("keydown",(function(e){[13,10].indexOf(e.which||e.keyCode)>=0&&n.enterKey.emit(e)}))};Ze.decorators=[{type:t.Directive,args:[{selector:"[enterKey]"}]}],Ze.ctorParameters=function(){return[{type:t.ElementRef}]},Ze.propDecorators={enterKey:[{type:t.Output}]};var et=function(e){var n=this;this.element=e,this.escapeKey=new t.EventEmitter,e.nativeElement.addEventListener("keydown",(function(e){27==(e.which||e.keyCode)&&n.escapeKey.emit(e)}))};et.decorators=[{type:t.Directive,args:[{selector:"[escapeKey]"}]}],et.ctorParameters=function(){return[{type:t.ElementRef}]},et.propDecorators={escapeKey:[{type:t.Output}]};var tt=function(e){var n=this;this.element=e,this.preventBackKey=new t.EventEmitter,e.nativeElement.addEventListener("keydown",(function(e){var t=[8].indexOf(e.which||e.keyCode)<0;return t||(n.preventBackKey.emit(e),e.preventDefault&&e.preventDefault()),t}))};tt.decorators=[{type:t.Directive,args:[{selector:"[preventBackKey]"}]}],tt.ctorParameters=function(){return[{type:t.ElementRef}]},tt.propDecorators={preventBackKey:[{type:t.Output}]};var nt=function(e){var n=this;this.element=e,this.preventEnterKey=new t.EventEmitter,e.nativeElement.addEventListener("keydown",(function(e){var t=[13,10].indexOf(e.which||e.keyCode)<0;return t||(n.preventEnterKey.emit(e),e.preventDefault&&e.preventDefault()),t}))};nt.decorators=[{type:t.Directive,args:[{selector:"[preventEnterKey]"}]}],nt.ctorParameters=function(){return[{type:t.ElementRef}]},nt.propDecorators={preventEnterKey:[{type:t.Output}]};var rt=function(){this.hintStyle={"font-size":"75%",color:"#BBB"}};rt.decorators=[{type:t.Component,args:[{selector:"input-hint",template:'<div style="position:relative;" [ngStyle]="hintStyle"><div style="position:absolute;top:0;width:100%"><ng-content></ng-content></div></div>'}]}],rt.propDecorators={hintStyle:[{type:t.Input}]};var ot=function(){function e(e){var n=this;this.element=e,this.formChanged=new t.EventEmitter,this.onChange=function(e){n.formChanged.emit(e)},e.nativeElement.addEventListener("change",this.onChange)}return e.prototype.ngOnDestroy=function(){this.element.nativeElement.removeEventListener("change",this.onChange)},e}();ot.decorators=[{type:t.Directive,args:[{selector:"[formChanged]"}]}],ot.ctorParameters=function(){return[{type:t.ElementRef}]},ot.propDecorators={formChanged:[{type:t.Output}]};var it=function(){function e(e){var n=this;this.element=e,this.formAlter=new t.EventEmitter,this.onChange=function(e){n.formAlter.emit(e)},e.nativeElement.addEventListener("input",this.onChange),e.nativeElement.addEventListener("change",this.onChange)}return e.prototype.ngOnDestroy=function(){this.element.nativeElement.removeEventListener("change",this.onChange),this.element.nativeElement.removeEventListener("input",this.onChange)},e}();it.decorators=[{type:t.Directive,args:[{selector:"[formAlter]"}]}],it.ctorParameters=function(){return[{type:t.ElementRef}]},it.propDecorators={formAlter:[{type:t.Output}]};var at=[_e,$e,Qe,Ke,Oe,qe,Ve],st=d([He,ze,Re,Xe,Be,Le,We,it,ot,Ze,et,tt,nt],at,[Ue,Ye,Ae,Se,Je,Ge,Fe,Ne,je,rt],we,[de,ue,me,ge,ye,B,k,O,se,pe,T,P,xe,Ee,H,R]),lt=function(){function e(){}return e.prototype.transform=function(){return function(e){return e}},e}();lt.decorators=[{type:t.Pipe,args:[{name:"indexTrack"}]}];var pt=function(){function e(){}return e.prototype.transform=function(e,t){return JSON.stringify(e,null,t)},e}();pt.decorators=[{type:t.Pipe,args:[{name:"stringify"}]}];var ct=function(){function e(){}return e.prototype.transform=function(e,t,n){return K(e,t,n)},e}();ct.decorators=[{type:t.Pipe,args:[{name:"array"}]}];var ut=function(){function e(){}return e.prototype.transform=function(e,t,n){return function(e,t,n){return K(e,t,n).map((function(e,t){return{value:e,index:t}}))}(e,t,n)},e}();ut.decorators=[{type:t.Pipe,args:[{name:"arrayOfObjects"}]}];var ht=function(){function e(e){this.domSanitizer=e}return e.prototype.transform=function(e){return this.domSanitizer.bypassSecurityTrustResourceUrl(e)},e}();ht.decorators=[{type:t.Pipe,args:[{name:"safeUrl"}]}],ht.ctorParameters=function(){return[{type:a.DomSanitizer}]};var dt=function(){function e(){}return e.prototype.transform=function(e,t){return e+(t&&1==t?"":"s")},e}();dt.decorators=[{type:t.Pipe,args:[{name:"numberWord"}]}],dt.ctorParameters=function(){return[]};var ft=function(){function e(){}return e.prototype.transform=function(e){return e&&1==e?"":"s"},e}();ft.decorators=[{type:t.Pipe,args:[{name:"endNumberWord"}]}],ft.ctorParameters=function(){return[]};var mt=function(){function e(e){this.domSanitizer=e}return e.prototype.transform=function(e){return this.domSanitizer.bypassSecurityTrustHtml(e)},e}();mt.decorators=[{type:t.Pipe,args:[{name:"safeHtml"}]}],mt.ctorParameters=function(){return[{type:a.DomSanitizer}]};var gt=function(){function e(e){this.domSanitizer=e}return e.prototype.transform=function(e){return this.domSanitizer.bypassSecurityTrustStyle(e)},e}();gt.decorators=[{type:t.Pipe,args:[{name:"safeStyle"}]}],gt.ctorParameters=function(){return[{type:a.DomSanitizer}]};var yt=function(){function e(){}return e.prototype.transform=function(e,t,n){return W(e,t,n)},e}();yt.decorators=[{type:t.Pipe,args:[{name:"between"}]}];var vt=function(){function e(){}return e.prototype.transform=function(e,t,n){return F(e,t,n)},e}();vt.decorators=[{type:t.Pipe,args:[{name:"replaceMaxLength"}]}];var bt=function(){function e(){}return e.prototype.transform=function(e){return _(e)},e}();bt.decorators=[{type:t.Pipe,args:[{name:"textDownload"}]}];var Ct=function(){function e(){}return e.prototype.transform=function(e){return j(e)},e}();Ct.decorators=[{type:t.Pipe,args:[{name:"numberToPhone"}]}];var wt=function(){function e(){}return e.prototype.transform=function(e){return N(e)},e}();wt.decorators=[{type:t.Pipe,args:[{name:"toNumber"}]}];var Et=function(){function e(){}return e.prototype.transform=function(e,t){return q(e,t)},e}();Et.decorators=[{type:t.Pipe,args:[{name:"numberSuffix"}]}];var xt=function(){function e(){}return e.prototype.transform=function(e){return V(e)},e}();xt.decorators=[{type:t.Pipe,args:[{name:"markdownAnchor"}]}];var Mt=function(){function e(){}return e.prototype.transform=function(e){return G(e)},e}();Mt.decorators=[{type:t.Pipe,args:[{name:"capitalize"}]}];var It=function(){function e(){}return e.prototype.transform=function(e){return J(e)},e}();It.decorators=[{type:t.Pipe,args:[{name:"capitalizeWords"}]}];var kt=function(){function e(){}return e.prototype.transform=function(e){return $(e)},e}();kt.decorators=[{type:t.Pipe,args:[{name:"yesno"}]}];var Ot=function(){function e(){}return e.prototype.transform=function(e){return Q(e)},e}();Ot.decorators=[{type:t.Pipe,args:[{name:"YesNo"}]}];var St=function(){function e(){}return e.prototype.transform=function(e){return U(e)},e}();St.decorators=[{type:t.Pipe,args:[{name:"boolean"}]}];var Tt=function(){function e(){}return e.prototype.transform=function(e){return function(e){return U(e)?1:0}(e)},e}();Tt.decorators=[{type:t.Pipe,args:[{name:"bit"}]}];var Dt=function(){function e(){}return e.prototype.transform=function(e){return Y(e)},e}();Dt.decorators=[{type:t.Pipe,args:[{name:"numbers"}]}];var Pt=function(){function e(){}return e.prototype.transform=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Z.apply(Z,e)},e}();Pt.decorators=[{type:t.Pipe,args:[{name:"aDate"}]}];var At=function(){function e(){}return e.prototype.transform=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return te.apply(te,e)},e}();At.decorators=[{type:t.Pipe,args:[{name:"aMath"}]}];var Rt=function(){function e(){}return e.prototype.transform=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ne.apply(ne,e)},e}();Rt.decorators=[{type:t.Pipe,args:[{name:"aString"}]}];var Ht=function(){function e(){}return e.prototype.transform=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ee.apply(ee,e)},e}();Ht.decorators=[{type:t.Pipe,args:[{name:"aTime"}]}];var Bt=function(){function e(){}return e.prototype.transform=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return re.apply(re,e)},e}();Bt.decorators=[{type:t.Pipe,args:[{name:"ack"}]}];var zt=function(){function e(){}return e.prototype.transform=function(e){return e&&"object"==typeof e&&e.constructor==Array?e.map((function(e,t){return t})):e?Object.keys(e):[]},e}();zt.decorators=[{type:t.Pipe,args:[{name:"keys"}]}];var Lt=function(){function e(){}return e.prototype.transform=function(e){return typeof e},e}();Lt.decorators=[{type:t.Pipe,args:[{name:"typeof"}]}];var Wt=function(){function e(){}return e.prototype.transform=function(){return console.log.apply(console,arguments)},e}();Wt.decorators=[{type:t.Pipe,args:[{name:"console"}]}];var Ft=[lt,pt,ct,ut,mt,ht,gt,bt,xt,Mt,It,kt,Ot,zt,Lt,Wt,Pt,At,Rt,Ht,Bt,Dt,wt,Ct,Et,Tt,dt,ft,St,yt,vt],jt=d(st,Ft),Nt=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:x}},e}();Nt.decorators=[{type:t.NgModule,args:[{imports:[n.CommonModule],declarations:jt,providers:x,exports:d(jt)}]}];var qt=function(){function e(e,t){var n=this;this.router=e,this.activatedRoute=t,this.current={},this.$history=[],this.historyPos=0,this.isBackMode=!1,this.isOsAction=!1,this.isNextBackMode=!1,this.isNextBackHistory=!1,this.activatedRoute=t,e.events.subscribe((function(e){if(e.constructor==s.NavigationEnd){var t=n.getCurrent();n.recordStateChange(t.config,t.params)}})),this.current=this.getCurrent()}return e.prototype.$window=function(){return window},e.prototype.getCurrent=function(){return Kt(this.activatedRoute)},e.prototype.getCurrentConfig=function(){for(var e=this.activatedRoute;e.firstChild;)e=e.firstChild;return e.routeConfig||e.config||e},e.prototype.getCurrentParams=function(){for(var e=this.activatedRoute;e.firstChild;)e=e.firstChild;return e.snapshot.params},e.prototype.isTrapHistory=function(e,t){return this.isBackHistory(e,t)&&this.isForwardHistory(e,t)},e.prototype.isBackHistory=function(e,t){var n=this.$history;return n.length>this.historyPos+1&&e&&e.name==n[this.historyPos+1].name&&this.isParamsMatch(t,n[this.historyPos+1].params)},e.prototype.isForwardHistory=function(e,t){var n=this.$history;return!this.isNextBackMode&&this.historyPos&&n.length>this.historyPos&&e&&e.name==n[this.historyPos-1].name&&this.isParamsMatch(t,n[this.historyPos-1].params)},e.prototype.isParamsMatch=function(e,t){if(!e||!t)return!1;for(var n in e)if(e[n]!=t[n])return!1;return!0},e.prototype.recordStateChange=function(e,t){this.current={params:t,config:e};var n=this.isForwardHistory(e,t),r=this.isNextBackHistory||this.isBackHistory(e,t);this.isOsAction&&this.isTrapHistory(e,t)?this.isBackMode?n=!1:r=!1:this.isBackMode=this.isNextBackMode||this.isOsAction&&r;var o=this.$history;if(e){if(n)--this.historyPos;else if(this.isBackMode)++this.historyPos;else{this.historyPos=0;var i={name:e.name,params:t};Object.keys(t).length||delete i.params,o.unshift(i)}this.isNextBackHistory=!1}},e.prototype.goBackTo=function(e,t){this.isNextBackMode=!0,this.isNextBackHistory=!0,this.$state().go(e,t)},e.prototype.tryBack=function(e,t){this.$history.length?(this.isNextBackMode=!0,this.isNextBackHistory=!0,this.$window().history.back()):this.goBackTo(e,t)},e.prototype.watchDocument=function(e){this.watchDocByCallbacks(e,this.getDocumentCallbacks())},e.prototype.getDocumentCallbacks=function(){var e=this;return{isBackButton:function(){e.isOsAction=!0},isNotBackButton:function(){e.isOsAction=!1}}},e.prototype.watchDocByCallbacks=function(e,t){e.addEventListener("mouseout",t.isBackButton),e.addEventListener("mousedown",t.isNotBackButton)},e.prototype.unwatchDocByCallbacks=function(e,t){e.removeEventListener("mouseout",t.isBackButton),e.removeEventListener("mouseover",t.isNotBackButton),e.removeEventListener("mousedown",t.isNotBackButton)},e}();function Kt(e){for(var t=e,n=e;n.firstChild;)t=n,n=n.firstChild;var r=n.snapshot||{},o=t.snapshot||{};return{ActivatedRoute:n,config:n.routeConfig||n.config||n,params:r.params,parent:{ActivatedRoute:t,config:t.routeConfig||n.config||t,params:o.params}}}qt.decorators=[{type:t.Injectable}],qt.ctorParameters=function(){return[{type:s.Router},{type:s.ActivatedRoute}]};var Vt=function(){function e(e){this.Router=e,this.routeHistory=[],this.maxHistory=10,this.historyIndex=0,this.subs=[],this.monitor()}return e.prototype.monitor=function(){var e=this;this.subs.push(this.Router.events.subscribe((function(t){t.constructor===s.NavigationEnd&&e.addRouteToHistory()})))},e.prototype.ngOnDestroy=function(){this.subs.forEach((function(e){return e.unsubscribe()}))},e.prototype.addRouteToHistory=function(){var e=this.historyIndex+1,t=this.historyIndex-1,n=this.routeHistory.length>=e&&this.Router.url===this.routeHistory[e],r=this.routeHistory.length>=t&&this.Router.url===this.routeHistory[t],o=this.Router.url===this.routeHistory[this.historyIndex];if(r&&--this.historyIndex,n&&++this.historyIndex,r||o||n)this.applyNav();else{for(;this.routeHistory.length>this.maxHistory;)this.routeHistory.pop();this.routeHistory.splice(this.historyIndex,0,this.Router.url),this.applyNav()}},e.prototype.applyNav=function(){if(this.historyIndex<this.routeHistory.length-1)this.back=this.routeHistory[this.historyIndex+1];else if(this.routeHistory.length){var e=this.routeHistory[this.routeHistory.length-1].split("/");e.pop(),this.back=e.join("/"),++this.historyIndex}else delete this.back;this.historyIndex>0?this.forward=this.routeHistory[this.historyIndex-1]:delete this.forward},e.prototype.goBack=function(){if(this.historyIndex!==this.routeHistory.length-1){var e=this.routeHistory[this.historyIndex+1];this.Router.navigate([e])}},e.prototype.goForward=function(){if(0!==this.historyIndex){var e=this.routeHistory[this.historyIndex-1];this.Router.navigate([e])}},e}();Vt.decorators=[{type:t.Injectable}],Vt.ctorParameters=function(){return[{type:s.Router}]};var _t=function(){function e(e,n,r){this.Router=e,this.RouteWatchReporter=n,this.ActivatedRoute=r,this.stateChanger=new t.EventEmitter,this.beforeChanger=new t.EventEmitter,this.activatedChange=new t.EventEmitter,this.paramsChange=new t.EventEmitter,this.dataChange=new t.EventEmitter,this.queryChange=new t.EventEmitter,this.routeChange=new t.EventEmitter,this.parentRouteChange=new t.EventEmitter,this.parentChange=new t.EventEmitter,this.parentDataChange=new t.EventEmitter,this.stateChange=new t.EventEmitter,this.$document=document,this.apply()}return e.prototype.ngOnInit=function(){var e=this;this.docCallbacks=this.RouteWatchReporter.getDocumentCallbacks(),this.RouteWatchReporter.router.events.subscribe((function(t){t.constructor===s.NavigationEnd&&(e.beforeChanger.emit(e.RouteWatchReporter),e.apply(),Promise.resolve().then((function(){return e.emit()})))})),this.ActivatedRoute&&this.ActivatedRoute.data.subscribe((function(t){return e.dataChange.emit(e.data=t)})),this.RouteWatchReporter.watchDocByCallbacks(this.$document,this.docCallbacks),this.apply(),Promise.resolve().then((function(){e.emit(),e.querySub=e.RouteWatchReporter.activatedRoute.queryParams.subscribe((function(t){return e.queryChange.emit(t)}))})),this.onLoad&&this.onLoad({state:this.RouteWatchReporter.current,params:this.RouteWatchReporter.current.params,current:this.RouteWatchReporter.current})},e.prototype.ngOnDestroy=function(){this.RouteWatchReporter.unwatchDocByCallbacks(this.$document,this.docCallbacks),this.querySub&&this.querySub.unsubscribe()},e.prototype.apply=function(){var e=Kt(this.ActivatedRoute);this.route=e.config,this.current=e,this.state=e,this.activated=e.ActivatedRoute,this.params=e.params||{},this.data=e.config.data||{};var t=e.parent;if(t){var n=t.config,r=t.ActivatedRoute;this.parentRoute=n,this.parent=r,this.parentData=n.data}},e.prototype.emit=function(){this.stateChanger.emit(this.RouteWatchReporter);var e=this.RouteWatchReporter.getCurrent();this.routeChange.emit(e.config),this.stateChange.emit(e),this.activatedChange.emit(e.ActivatedRoute),this.paramsChange.emit(e.params),this.dataChange.emit(e.config.data);var t=e.parent;if(t){var n=t.config,r=t.ActivatedRoute;this.parentRouteChange.emit(n),this.parentChange.emit(r),this.parentDataChange.emit(n.data)}},e.prototype.goBackTo=function(e,t){this.RouteWatchReporter.goBackTo(e,t)},e.prototype.tryBack=function(e,t){this.RouteWatchReporter.tryBack(e,t)},e}();_t.decorators=[{type:t.Directive,args:[{selector:"route-reporter",exportAs:"RouteReporter"}]}],_t.ctorParameters=function(){return[{type:s.Router},{type:qt},{type:s.ActivatedRoute}]},_t.propDecorators={onLoad:[{type:t.Input}],stateChanger:[{type:t.Output,args:["onChange"]}],beforeChanger:[{type:t.Output,args:["beforeChange"]}],activated:[{type:t.Input}],activatedChange:[{type:t.Output}],params:[{type:t.Input}],paramsChange:[{type:t.Output}],data:[{type:t.Input}],dataChange:[{type:t.Output}],query:[{type:t.Input}],queryChange:[{type:t.Output}],route:[{type:t.Input}],routeChange:[{type:t.Output}],parentRoute:[{type:t.Input}],parentRouteChange:[{type:t.Output}],parent:[{type:t.Input}],parentChange:[{type:t.Output}],parentData:[{type:t.Input}],parentDataChange:[{type:t.Output}],current:[{type:t.Input}],state:[{type:t.Input}],stateChange:[{type:t.Output}]};var $t=[qt,Vt],Qt=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:$t}},e}();Qt.decorators=[{type:t.NgModule,args:[{imports:[n.CommonModule,s.RouterModule],declarations:[_t],exports:[_t,s.RouterModule]}]}];var Ut=function(){function e(){this.prefix="offline"}return e.prototype.set=function(e,t){return t&&t.constructor==Object&&(t.offlineSavedAt=(new Date).toString()),t&&t.constructor==Object&&(t.offlineCreatedAt=t.offlineCreatedAt||(new Date).toString()),p.setItem(this.prefix+"-"+e,t)},e.prototype.get=function(e){return p.getItem(this.prefix+"-"+e)},e.prototype.remove=function(e){return p.removeItem(this.prefix+"-"+e)},e.prototype.clear=function(e){return this.remove(e)},e.prototype.clearAll=function(){var e=this;return this.promiseNameArray().then((function(t){return t.forEach((function(t){return e.remove(t)}))}))},e.prototype.promiseNameArray=function(){var e=this,t=[];return p.iterate((function(n,r){r.startsWith(e.prefix)&&t.push(r.substring(e.prefix.length+1,r.length))})).then((function(){return t}))},e}();Ut.decorators=[{type:t.Injectable}];var Yt=function(e){function t(){var t=e.apply(this,d(arguments))||this;return t.prefix="offline-cache",t}return u(t,e),t.prototype.validate=function(e,t){return null!==e&&void 0!==e.cache&&!this.hasExpired(e._timestamp,e.expires||t.expires)},t.prototype.optionsKillCache=function(e){return null!=e.maxAge||null!=e.expires},t.prototype.hasMaxAged=function(e,t){var n=Date.now()-t;return!(!t||!(e<=n))},t.prototype.hasExpired=function(e,t){var n=Date.now()>=new Date(t).getTime();return!(!t||!n)},t.prototype.param=function(e,t){return void 0===t&&(t={}),t.param=t.param||[],this.getCache(e,t)},t.prototype.paramCache=function(e,t){return this.param(e,t)},t.prototype.paramSave=function(e,t){var n=this;return this.paramCache(e,t).then((function(t){return n.setCache(e,t)}))},t.prototype.paramSaveCache=function(e,t){return this.paramSave(e,t)},t.prototype.cacheToReturn=function(e,t,n){if(null==t.cache&&null==t._timestamp)return Promise.resolve(t);var r=t.expires||n.expires,o=t.maxAge||n.maxAge;if(n.allowExpired||!r&&!o)return Promise.resolve(t.cache);var i=r&&this.hasExpired(t._timestamp,r),a=o&&this.hasMaxAged(t._timestamp,o);return i||a?this.selfDestructData(e,t).then((function(){if(n.param)return Promise.resolve(n.param)})):Promise.resolve(t.cache)},t.prototype.selfDestructData=function(e,t){return this.dataDestructReady(t)?this.clear(e):Promise.resolve()},t.prototype.dataDestructReady=function(e){var t=e.maxAge&&this.hasMaxAged(e._timestamp,e.maxAge),n=e.expires&&this.hasExpired(e._timestamp,e.expires);return t||n},t.prototype.get=function(t,n){var r=this;return void 0===n&&(n={expires:null}),e.prototype.get.call(this,t).then((function(e){return e?r.cacheToReturn(t,e,n):n.param?n.param:void 0}))},t.prototype.getCache=function(e,t){return this.get(e,t)},t.prototype.dataOptionsCache=function(e,t,n){void 0===t&&(t={});var r={};return r._timestamp=Date.now(),t.expires&&(r.expires=t.expires),t.maxAge&&(r.maxAge=t.maxAge),e=e&&e.constructor!=String?e:{},Object.assign(e,r),n&&n.constructor==String?e.cache=n:e.cache&&e.cache.constructor!=String?Object.assign(e.cache,n):e.cache=n,e},t.prototype.set=function(t,n,r){var o=this;return void 0===r&&(r={}),r.name=r.name||t,e.prototype.get.call(this,t).then((function(e){return o.dataOptionsCache(e,r,n)})).then((function(n){return e.prototype.set.call(o,t,n)}))},t.prototype.setCache=function(e,t,n){return this.set(e,t,n)},t}(Ut);Yt.decorators=[{type:t.Injectable}];var Jt=function(e){function t(){var t=e.apply(this,d(arguments))||this;return t.prefix="offline-que",t.handlers=[],t}return u(t,e),t.prototype.get=function(t){return e.prototype.get.call(this,t).then((function(e){return e&&e.que?e.que:[]}))},t.prototype.getQue=function(e){return this.get(e)},t.prototype.setQue=function(e,t){return this.set(e,t)},t.prototype.que=function(t,n){var r=this;return e.prototype.get.call(this,t).then((function(o){return(o=o||{}).que=o.que||[],n.forEach?n.forEach((function(e){o.que.push(e)})):o.que.push(n),e.prototype.set.call(r,t,o)}))},t.prototype.set=function(e,t){return this.que(e,t)},t.prototype.dequeByIndex=function(e,t){var n=this;return this.getQue(e).then((function(e){return e.splice(t,1),e})).then((function(t){return n.setQue(e,t)}))},t.prototype.processQuedByIndex=function(e,t){var n=this,r=this.getQueHandlerByName(e),o={item:null,array:null,result:null};return this.getQue(e).then((function(e){o.item=e.splice(t,1),o.array=e})).then((function(){return n.handleQued(o.item,r)})).then((function(e){return o.result=e})).then((function(){return n.setQue(e,o.array)})).then((function(){return o.result}))},t.prototype.registerHandler=function(e,t){return this.handlers.push({name:e,handler:t}),this},t.prototype.registerQueHandler=function(e,t){return this.registerHandler(e,t)},t.prototype.paramHandler=function(e,t){for(var n=this.handlers.length-1;n>=0;--n)if(this.handlers[n].name==e)return this;return this.handlers.push({name:e,handler:t}),this},t.prototype.getQueHandDefByName=function(e){for(var t=this.handlers.length-1;t>=0;--t)if(this.handlers[t].name==e)return this.handlers[t]},t.prototype.getQueHandlerByName=function(e){var t=this.getQueHandDefByName(e);if(t)return t.handler},t.prototype.handleQued=function(e,t){return Promise.resolve(t(e))},t.prototype.processQuedHandler=function(e){var t=this,n=[],r={que:[]},o=this.eachHandler(e.handler);return this.get(e.name).then((function(e){return r.que=e})).then((function(){return t.clear(e.name)})).then((function(){var e=Promise.resolve();return r.que.forEach((function(t){e=e.then((function(){return o(t)})).catch((function(e){return e})).then((function(e){return n.push(e)}))})),e})).then((function(){return n}))},t.prototype.eachHandler=function(e){var t=this;return function(n){return t.handleQued(n,e)}},t.prototype.processQue=function(e){var t=this.getQueHandDefByName(e);return t?this.processQuedHandler(t):Promise.resolve()},t.prototype.processAllQues=function(){var e=this,t=[];return this.handlers.forEach((function(n){return t.push(e.processQuedHandler(n))})),Promise.all(t).then((function(e){var t=[];return e.forEach((function(e){return t.push.apply(t,e)})),Promise.all(t)}))},t}(Ut);function Gt(e){Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.status=504,this.code="gateway_timeout",this.message=e||"Could not connect to server or server did not respond in a timely manner. Please check internet connection and then try again."}Jt.decorators=[{type:t.Injectable}],Gt.prototype=Object.create(Error.prototype);var Xt=function(){function e(e){this.HttpClient=e,this.response=new t.EventEmitter,this.Request=new t.EventEmitter,this.AuthError=new t.EventEmitter,this.ApiError=new t.EventEmitter,this.AckCache=new Yt,this.AckQue=new Jt,this.config={baseUrl:"",$http:{method:"GET",headers:{},timeout:6500}},this.paramConfig()}return e.prototype.paramConfig=function(){},e.prototype.registerHandler=function(e,t,n){var r=this;return n=n||{maxTry:50},t=t||function(e){return r.request(e)},this.AckQue.registerHandler(e,t),this},e.prototype.getQue=function(e){return this.AckQue.get(e)},e.prototype.getCache=function(e){return this.AckCache.get(e)},e.prototype.processQue=function(e){var t=this;return this.AckQue.paramHandler(e,(function(e){return t._fetch(e)})),this.AckQue.processQue(e)},e.prototype.clearQue=function(e){return this.AckQue.clear(e)},e.prototype.clearCache=function(e){return this.AckCache.clear(e)},e.prototype.request=function(e){var t=Object.assign({},this.config.$http);t.headers=Object.assign({},this.config.$http.headers);var n=Object.assign(t,e||{});return n.url=this.config.baseUrl+n.url,n.offlineModel?this.requestOfflineModel(n):this._fetch(n)},e.prototype.getCacheByNamedRequest=function(e){var t=this,n=e.offlineModel;return this.AckCache.get(n.name,n).then((function(n){return(n=n||{})[t.getStorageNameByRequest(e)]})).then((function(n){return t.processCacheGet(n,e)}))},e.prototype.getStorageNameByRequest=function(e){if(e.params){var t=Object.keys(e.params);if(!t.length)return e.url;var n=e.url+(e.url.search(/\?/)>=0?"&":"?");return t.sort().forEach((function(t){return n+=t+"="+e.params[t]+"&"})),n.substring(0,n.length-1)}return e.url},e.prototype.requestOfflineModel=function(e){var t=this,n=e.offlineModel;return n&&n.constructor==String&&(e.offlineModel=n={name:e.offlineModel}),"GET"===e.method?this.getCacheByNamedRequest(e):(this.AckQue.paramHandler(n.name,(function(e){return t._fetch(e)})),this._fetch(e).catch((function(n){return t.postRequestFail(n,e)})))},e.prototype.processCacheGet=function(e,t){var n=this;if(null==e)return this._fetch(t);var r=t.offlineModel;return this.AckCache.cacheToReturn(r.name,e,r).then((function(e){var o=n.AckCache.optionsKillCache(r);return e&&!o&&console.log("AckApi fetched cache that will never expire. Set offlineModel.expires=0 or offlineModel.maxAge=0 to avoid this message",e),null!=e?e:n._fetch(t)}))},e.prototype.postRequestFail=function(e,t){if(!(0==e.status||-1==e.status||503==e.status))return Promise.reject(e);t.sendFailMeta=t.sendFailMeta||{},t.sendFailMeta.offlineId=Date.now(),t.sendFailMeta.lastAttempt=new Date,t.sendFailMeta.attempts=null==t.sendFailMeta.attempts?1:++t.sendFailMeta.attempts,t.sendFailMeta.maxTry=t.sendFailMeta.maxTry||50;var n=t.sendFailMeta.maxTry&&t.sendFailMeta.attempts<=t.sendFailMeta.maxTry;if(e.sendFailMeta=t.sendFailMeta,n){var r=Object.assign({},t);delete r.offlineModel;var o=t.offlineModel;return this.AckQue.set(o.name,r).then((function(){return Promise.reject(e)}))}return Promise.reject(e)},e.prototype._fetch=function(e){var t=this;!function(e){if(e.method=e.method||"GET",e.reportProgress=e.reportProgress||!1,e.params)for(var t in e.params)null==e.params[t]&&(e.params[t]="")}(e);var n=Object.assign({},e);e.params&&(n.params=new l.HttpParams({fromObject:e.params})),e.headers&&(n.headers=new l.HttpHeaders(e.headers));var r=new l.HttpRequest(e.method,e.url,e.body,n);return new Promise((function(n,o){var i=!1;t.Request.emit(r);var a=t.HttpClient.request(r).subscribe((function(e){e.type===l.HttpEventType.Response&&(i=!0,n(e))}),(function(e){i=!0,o(e)}));e.timeout&&setTimeout((function(){if(!i){a.unsubscribe();var t=new Gt;Object.assign(t,r),t.timeout=e.timeout,o(t)}}),e.timeout)})).then((function(n){return t.processFetchByConfig(n,e)})).catch((function(n){return t.httpFailByConfig(n,e)}))},e.prototype.processFetchByConfig=function(e,t){this.response.emit(e);var n=e.body||e._body;if(n&&"application/json"==e.headers.get("Content-Type")&&!e.data)try{e.data=JSON.parse(n)}catch(e){}e.data=n;var r=!t.promise||"data"==t.promise?n:e;return"GET"===t.method&&t.offlineModel?this.requestResponseToCache(t,r).then((function(){return r})):Promise.resolve(r)},e.prototype.httpFailByConfig=function(e,t){var n=null==t.catch||"data"==t.catch,r=e.data;if(n&&r&&r.error){var o=new Error;Object.assign(o,e.data.error),e=o}return e.method=e.method||t.method,401==e.status?this.AuthError.emit(e):this.ApiError.emit(e),Promise.reject(e)},e.prototype.requestResponseToCache=function(e,t){var n=this,r=e.offlineModel.name||e.offlineModel;return this.AckCache.get(r).then((function(r){return(r=r||{})[n.getStorageNameByRequest(e)]={cache:t},n.AckCache.dataOptionsCache(r[e.url],e.offlineModel,t),r})).then((function(e){return n.AckCache.set(r,e)}))},e.prototype.get=function(e,t){var n=Object.assign({},t);return n.method="GET",n.url=e,this.request(n)},e.prototype.post=function(e,t,n){var r=Object.assign({},n);return r.method="POST",r.body=t,r.url=e,this.request(r)},e.prototype.delete=function(e,t){var n=Object.assign({},t);return n.method="DELETE",n.url=e,this.request(n)},e.prototype.put=function(e,t,n){var r=Object.assign({},n);return r.method="PUT",r.body=t,r.url=e,this.request(r)},e}();Xt.decorators=[{type:t.Injectable}],Xt.ctorParameters=function(){return[{type:l.HttpClient}]},Object.defineProperty(e,"ack",{enumerable:!0,get:function(){return o.ack}}),e.AckApi=Xt,e.AckApp=y,e.AckArray=xe,e.AckModule=Nt,e.AckRouterModule=Qt,e.DocumentService=E,e.ErrorLog=v,e.HtmlSizeService=f,e.Log=m,e.Prompts=g,e.RouteWatchReporter=qt,e.UrlVars=w,e.WindowService=C,e.components=st,e.pipes=Ft,e.providers=x,e.a=$t,e.b=Ze,e.ba=It,e.bb=kt,e.bc=Ot,e.bd=St,e.be=Tt,e.bf=Dt,e.bg=Pt,e.bh=At,e.bi=Rt,e.bj=Ht,e.bk=Bt,e.bl=zt,e.bm=Lt,e.bn=Wt,e.bo=He,e.bp=ze,e.bq=Re,e.br=Xe,e.bs=Be,e.bt=Le,e.bu=We,e.bv=_e,e.bw=$e,e.bx=Qe,e.by=Ke,e.bz=Oe,e.c=et,e.ca=ke,e.cb=qe,e.cc=Ve,e.cd=Ue,e.ce=Ye,e.cf=Ae,e.cg=Se,e.ch=Je,e.ci=Ge,e.cj=Fe,e.ck=je,e.cl=Ne,e.cm=be,e.cn=Ce,e.co=we,e.cp=ve,e.cq=de,e.cr=he,e.cs=ue,e.ct=ce,e.cu=me,e.cv=ge,e.cw=ye,e.cx=fe,e.cy=B,e.cz=k,e.d=tt,e.da=I,e.db=M,e.dc=O,e.dd=se,e.de=ae,e.df=pe,e.dg=le,e.dh=T,e.di=S,e.dj=P,e.dk=D,e.dl=Ee,e.dm=H,e.dn=R,e.do=A,e.dp=_t,e.dq=Vt,e.e=nt,e.f=rt,e.g=ot,e.h=it,e.i=at,e.j=lt,e.k=pt,e.l=ct,e.m=ut,e.n=ht,e.o=dt,e.p=ft,e.q=mt,e.r=gt,e.s=yt,e.t=vt,e.u=bt,e.v=Ct,e.w=wt,e.x=Et,e.y=xt,e.z=Mt,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ack-angular.umd.min.js.map