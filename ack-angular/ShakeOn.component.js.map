{"version":3,"sources":["../src/ShakeOn.component.ts"],"names":[],"mappings":"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","file":"ShakeOn.component.js","sourceRoot":"","sourcesContent":["import {\n  Directive,\n  Input,\n  Output,\n  EventEmitter,\n  ElementRef\n} from \"@angular/core\"\n\n/** runs shake instructions when condition returns a truthy value */\n export class ShakeOn {\n  timeout\n\n   shakeConstant = false\n\n   shakeOn\n   shakeThen = new EventEmitter()\n\n   shakeForMs\n   shakeForMsChange = new EventEmitter()\n\n   shakeType\n   shakeTypeChange = new EventEmitter()\n  \n   shakeRef\n   shakeRefChange = new EventEmitter()\n  \n  shakeTypes = [\n    'shake-slow','shake-hard','shake-little','shake-horizontal',\n    'shake-vertical','shake-rotate','shake-opacity','shake-crazy',\n    'shake-chunk'\n  ]\n\n  constructor(public element:ElementRef){}\n\n  ngOnInit(){\n    setTimeout(()=>this.update(), 0)\n  }\n\n  update(){\n    this.shakeForMs = this.shakeForMs || 2000\n    this.shakeRef = this\n    this.shakeType = this.shakeType || 'shake-slow'\n    \n    this.shakeRefChange.emit( this.shakeRef )\n    this.shakeTypeChange.emit( this.shakeType )\n    this.shakeForMsChange.emit( this.shakeForMs )\n  }\n\n  ngOnChanges(changes){\n    if (changes.shakeOn && changes.shakeOn.currentValue!=null && changes.shakeOn.currentValue!=changes.shakeOn.previousValue) {\n      if(changes.shakeOn.currentValue){\n        this.onTrue();\n      }else{\n        this.onFalse();\n      }\n    }\n\n    if(changes.shakeType && changes.shakeType.currentValue!=changes.shakeType.previousValue){\n      if(this.shakeOn){\n        removeClass(this.element.nativeElement, changes.shakeType.previousValue)\n        this.applyType()\n      }else{\n        this.removeType()        \n      }\n    }\n  }\n\n  onFalse(){\n    removeClass(this.element.nativeElement, 'shake-constant')\n    this.removeType()\n    if(this.timeout){\n      clearTimeout(this.timeout)\n      this.timeout = null\n    }\n  }\n\n  removeType(){\n    removeClass(this.element.nativeElement, this.shakeType||'shake-slow')\n  }\n\n  applyType(){\n    addClass(this.element.nativeElement, this.shakeType||'shake-slow')\n  }\n\n  onTrue(){\n    addClass(this.element.nativeElement, 'shake-constant')\n    this.applyType()\n\n    if(!this.shakeConstant){\n      this.timeout = setTimeout(()=>{\n        //$scope.shakeOnController.shakeOn = false\n        this.onFalse()\n        this.shakeThen.emit(this)\n      }, this.shakeForMs);\n    }\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Directive, args: [{\n  selector:'[shakeOn]'\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ElementRef, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'shakeConstant': [{ type: Input },],\n'shakeOn': [{ type: Input },],\n'shakeThen': [{ type: Output },],\n'shakeForMs': [{ type: Input },],\n'shakeForMsChange': [{ type: Output },],\n'shakeType': [{ type: Input },],\n'shakeTypeChange': [{ type: Output },],\n'shakeRef': [{ type: Input },],\n'shakeRefChange': [{ type: Output },],\n};\n}\n\nexport function hasClass(el, className) {\n  if (el.classList)\n    return el.classList.contains(className)\n  else\n    return !!el.className.match(new RegExp('(\\\\s|^)' + className + '(\\\\s|$)'))\n}\n\nexport function addClass(el, className) {\n  if (el.classList){\n    el.classList.add(className)\n  }\n  else if (!hasClass(el, className)) el.className += \" \" + className\n}\n\nexport function removeClass(el, className) {\n  if (el.classList)\n    el.classList.remove(className)\n  else if (hasClass(el, className)) {\n    var reg = new RegExp('(\\\\s|^)' + className + '(\\\\s|$)')\n    el.className=el.className.replace(reg, ' ')\n  }\n}\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}