{"version":3,"sources":["../src/AckOptions.component.ts"],"names":[],"mappings":"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","file":"AckOptions.component.js","sourceRoot":"","sourcesContent":["import { array } from \"./pipes.class\"\n\nimport {\n  ContentChild,\n  TemplateRef,\n  Component,\n  Input,\n  Output,\n  EventEmitter\n} from \"@angular/core\"\n\nimport { string as ackOptions } from \"./templates/ack-options.pug\"\n export class AckOptions{\n   array = []\n   stylize = true\n   multiple = false\n  //@Input() modelIsArray = false//support array of options to model-array, that array only allows a length of one\n   toggleable = false//multiple must be false\n\n    templateRef:TemplateRef<any>\n\n   model\n   modelChange = new EventEmitter()\n  \n   ref\n   refChange = new EventEmitter()\n  \n   arrayKey:string\n   modelKey:string\n   arrayToModelKey:string\n\n  //constructor(public ElementRef:ElementRef){}\n\n  ngOnInit(){\n    setTimeout(()=>{\n      //this.ref = Object.assign(this,this.ref)\n      this.refChange.emit(this)\n    }, 0)\n  }\n\n  selectItem(item){\n    const value = this.getArrayItemValue(item)\n\n    if( this.multiple ){// || this.modelIsArray\n      const modelIndex = this.modelIndex( item )\n      if(modelIndex>=0){\n        this.model.splice(modelIndex, 1)\n      }else{\n        this.model.push( this.getArrayItemModel(item) )\n      }\n    }else{\n      if(this.toggleable && this.model==value){\n        this.model = null\n      }else{\n        this.model = this.getArrayItemModel(item)\n      }\n    }\n\n    this.emitChange()\n  }\n\n  emitChange(){\n    this.modelChange.emit(this.model)\n    const form = getParentByTagName(this.templateRef.elementRef.nativeElement,'form')\n    if(form)this.fireFormEvents(form)\n  }\n\n  fireFormEvents(form){\n    let event = document.createEvent(\"HTMLEvents\");\n    event.initEvent(\"input\", true, true);\n    form.dispatchEvent(event)\n\n    event = document.createEvent(\"HTMLEvents\");\n    event.initEvent(\"change\", true, true);\n    form.dispatchEvent(event)\n  }\n\n  getArrayItemModel(item){\n    if(this.arrayToModelKey!=null){\n      if(this.arrayToModelKey==''){\n        return item\n      }\n      \n      const split = this.arrayToModelKey.split('.')\n      var scope = item\n      while(split.length){\n        if(scope==null)return null\n        let key = split.shift()\n        scope = scope[ key ]\n      }\n      return scope\n    }\n    return this.getArrayItemValue( item )\n  }\n\n  getArrayItemValue(item){\n    if(!this.arrayKey)return item\n\n    let items = this.arrayKey.split('.')\n    var scope = item\n    while(items.length){\n      if( scope==null )return null\n      scope = scope[ items.shift() ]\n    }\n\n    return scope\n  }\n\n  getModelValueToArrayItem(modelValue){\n    if(!this.modelKey)return modelValue\n\n    let items = this.modelKey.split('.')\n    var scope = modelValue\n    while(items.length){\n      if( scope==null )return null\n      scope = scope[ items.shift() ]\n    }\n\n    return scope\n  }\n\n  modelIndex(item){\n    this.model = array(this.model)\n    for(let i=this.model.length-1; i >= 0; --i){\n      let value = this.getArrayItemValue( item )\n      let modelValue = this.getModelValueToArrayItem( this.model[i] )\n      if( value == modelValue )return i\n    }\n    return -1\n  }\n\n  isItemSelected(item){\n    return this.modelIndex(item)>=0\n  }\n\n  getItemClass(item){\n    const selected = this.isItemSelected(item)\n    return {\n      'cursor-pointer pad-h pad-v-sm border-grey-6x border-bottom' : this.stylize,\n      'bg-warning' : this.stylize && selected,\n      'hover-bg-grey-5x' : this.stylize && !selected\n    }\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n  selector:'ack-options',\n  template:ackOptions\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'array': [{ type: Input },],\n'stylize': [{ type: Input },],\n'multiple': [{ type: Input },],\n'toggleable': [{ type: Input },],\n'templateRef': [{ type: ContentChild, args: [TemplateRef, ] },{ type: Input },],\n'model': [{ type: Input },],\n'modelChange': [{ type: Output },],\n'ref': [{ type: Input },],\n'refChange': [{ type: Output },],\n'arrayKey': [{ type: Input },],\n'modelKey': [{ type: Input },],\n'arrayToModelKey': [{ type: Input },],\n};\n}\n\nexport function getParentByTagName(node, tagname) {\n  let parent;\n  if (node === null || tagname === '') return;\n  parent  = node.parentNode;\n  tagname = tagname.toUpperCase();\n\n  while (parent && parent.tagName !== \"HTML\") {\n    if (parent.tagName === tagname) {\n      return parent;\n    }\n    parent = parent.parentNode;\n  }\n\n  return;\n}\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}